!function(){var t=function(t){var e={exports:{}};return t.call(e.exports,e,e.exports),e.exports},e=function(){function t(t,e){var r=[],n=!0,o=!1,i=undefined;try{for(var u,a=t[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&a["return"]&&a["return"]()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(t){return t&&t.__esModule?t:{"default":t}},n=t(function(t){(function(){var e=[].slice;!function(e,r){"function"==typeof e.define&&e.define.amd?e.define([],r):t.exports?t.exports=r():e.Twine=r()}(this,function(){var t,r,n,o,i,u,a,s,l,c,f,h,d,p,v,g,b,m,y,w,T,E,x,A,S,k,R,G,C,L,P,O,N,_,H,q,I,F,U,D;for(t={},t.shouldDiscardEvent={},s={},P={},S=0,N=null,T=/^[a-z]\w*(\.[a-z]\w*|\[\d+\])*$/i,L=!1,_=null,u=null,t.getAttribute=function(t,e){return t.getAttribute("data-"+e)||t.getAttribute(e)},t.reset=function(t,e){var r,n,o,i,u,a;null==e&&(e=document.documentElement);for(o in s)if(r=null!=(a=s[o])?a.bindings:void 0)for(n=0,i=r.length;n<i;n++)u=r[n],u.teardown&&u.teardown();return s={},N=t,_=e,_.bindingId=S=1,this},t.bind=function(e,r){return null==e&&(e=_),null==r&&(r=t.context(e)),o(r,e,d(e),!0)},t.afterBound=function(t){return u?u.push(t):t()},o=function(e,r,n,s){var l,f,h,d,g,b,m,y,T,E,x,A,k,R,G,C,L,P,O,_,q,$,I,F,U,D,M,K;if(u=[],T=null,r.bindingId&&t.unbind(r),m=t.getAttribute(r,"define-array")){q=a(r,e,m),null==n&&(n={});for(A in n)K=n[A],q.hasOwnProperty(A)||(q[A]=K);n=q,T=c(r),T.indexes=n}for(h=null,$=r.attributes,E=0,G=$.length;E<G;E++)l=$[E],M=l.name,v(M)&&(M=M.slice(5)),(b=t.bindingTypes[M])&&(null==h&&(h=[]),y=l.value,h.push([M,b,y]));if(h)for(null==T&&(T=c(r)),null==T.bindings&&(T.bindings=[]),null==T.indexes&&(T.indexes=n),I=h.sort(i),x=0,C=I.length;x<C;x++)F=I[x],F[0],b=F[1],y=F[2],(f=b(r,e,y,T))&&T.bindings.push(f);for((_=t.getAttribute(r,"context"))&&(k=w(r,_),"$root"===k[0]&&(e=N,k=k.slice(1)),e=p(e,k)||H(e,k,{})),(T||_||s)&&(null==T&&(T=c(r)),T.childContext=e,null!=n&&null==T.indexes&&(T.indexes=n)),d=u,U=r.children||[],R=0,L=U.length;R<L;R++)g=U[R],o(e,g,null!=_?null:n);for(t.count=S,D=d||[],O=0,P=D.length;O<P;O++)(0,D[O])();return u=null,t},c=function(t){var e;return null==t.bindingId&&(t.bindingId=++S),null!=s[e=t.bindingId]?s[e]:s[e]={}},t.refresh=function(){if(!L)return L=!0,setTimeout(t.refreshImmediately,0)},C=function(t){var e,r,n,o;if(t.bindings)for(o=t.bindings,e=0,r=o.length;e<r;e++)n=o[e],null!=n.refresh&&n.refresh()},t.refreshImmediately=function(){var t,e;L=!1;for(e in s)t=s[e],C(t)},t.register=function(t,e){if(P[t])throw new Error("Twine error: '"+t+"' is already registered with Twine");return P[t]=e},t.change=function(t,e){var r;return null==e&&(e=!1),r=document.createEvent("HTMLEvents"),r.initEvent("change",e,!0),t.dispatchEvent(r)},t.unbind=function(e){var r,n,o,i,u,a,l,c,f,h;if(o=e.bindingId){if(r=null!=(f=s[o])?f.bindings:void 0)for(i=0,a=r.length;i<a;i++)c=r[i],c.teardown&&c.teardown();delete s[o],delete e.bindingId}for(h=e.children||[],u=0,l=h.length;u<l;u++)n=h[u],t.unbind(n);return this},t.context=function(t){return h(t,!1)},t.childContext=function(t){return h(t,!0)},h=function(t,e){for(var r,n,o;t;){if(t===_)return N;if(e||(t=t.parentNode),!t)return console.warn("Unable to find context; please check that the node is attached to the DOM that Twine has bound, or that bindings have been initiated on this node's DOM"),null;if((n=t.bindingId)&&(r=null!=(o=s[n])?o.childContext:void 0))return r;e&&(t=t.parentNode)}},d=function(t){var e,r;for(null;t;){if(e=t.bindingId)return null!=(r=s[e])?r.indexes:void 0;t=t.parentNode}},t.contextKey=function(t,e){var r,n,o,i,u;for(i=[],r=function(t){var r,n;for(r in t)if(n=t[r],e===n){i.unshift(r);break}return e=t};t&&t!==_&&(t=t.parentNode);)(o=t.bindingId)&&(n=null!=(u=s[o])?u.childContext:void 0)&&r(n);return t===_&&r(N),i.join(".")},U=function(t){var e,r;return e=t.nodeName.toLowerCase(),"input"===e||"textarea"===e||"select"===e?"checkbox"===(r=t.getAttribute("type"))||"radio"===r?"checked":"value":"textContent"},w=function(t,e){var r,n,o,i,u,a,s;for(i=[],a=e.split("."),n=o=0,u=a.length;o<u;n=++o)if(e=a[n],-1!==(s=e.indexOf("[")))for(0===n?i.push.apply(i,y(e.substr(0,s),t)):i.push(e.substr(0,s)),e=e.substr(s);-1!==(r=e.indexOf("]"));)i.push(parseInt(e.substr(1,r),10)),e=e.substr(r+1);else 0===n?i.push.apply(i,y(e,t)):i.push(e);return i},y=function(t,e){var r,n,o;return r=null!=(n=s[e.bindingId])&&null!=(o=n.indexes)?o[t]:void 0,null!=r?[t,r]:[t]},p=function(t,e){var r,n,o;for(r=0,o=e.length;r<o;r++)n=e[r],null!=t&&(t=t[n]);return t},H=function(t,r,n){var o,i,u,a,s,l;for(l=r,r=2<=l.length?e.call(l,0,o=l.length-1):(o=0,[]),a=l[o++],i=0,s=r.length;i<s;i++)u=r[i],t=null!=t[u]?t[u]:t[u]={};return t[a]=n},F=function(t){return[].map.call(t.attributes,function(t){return t.name+"="+JSON.stringify(t.value)}).join(" ")},D=function(t,e,r){var n;if(g(t)&&(n=w(r,t)))return"$root"===n[0]?function(t,e){return p(e,n)}:function(t){return p(t,n)};t="return "+t,A(r)&&(t="with($arrayPointers) { "+t+" }"),O(e)&&(t="with($registry) { "+t+" }");try{return new Function(e,"with($context) { "+t+" }")}catch(t){throw t,"Twine error: Unable to create function on "+r.nodeName+" node with attributes "+F(r)}},O=function(t){return/\$registry/.test(t)},A=function(t){var e;return null!=t.bindingId&&(null!=(e=s[t.bindingId])?e.indexes:void 0)},r=function(t,e){var r,n,o,i;if(!(n=A(t)))return{};i={};for(o in n)r=n[o],i[o]=e[o][r];return i},g=function(t){return"true"!==t&&"false"!==t&&"null"!==t&&"undefined"!==t&&T.test(t)},v=function(t){return"d"===t[0]&&"a"===t[1]&&"t"===t[2]&&"a"===t[3]&&"-"===t[4]},f=function(t){var e;return e=document.createEvent("CustomEvent"),e.initCustomEvent("bindings:change",!0,!1,{}),t.dispatchEvent(e)},i=function(t,e){var r,n,o;return n=t[0],o=e[0],r={define:1,bind:2,eval:3},r[n]?r[o]?r[n]-r[o]:-1:1},t.bindingTypes={bind:function(e,n,o){var i,u,a,s,l,c,h,d,v,b,m;return m=U(e),b=e[m],l=void 0,d=void 0,u="radio"===e.getAttribute("type"),a=D(o,"$context,$root,$arrayPointers",e),c=function(){var t;if((t=a.call(e,n,N,r(e,n)))!==l&&(l=t,t!==e[m]))return e[m]=u?t===e.value:t,f(e)},g(o)?(h=function(){if(u){if(!e.checked)return;return H(n,s,e.value)}return H(n,s,e[m])},s=w(e,o),v="textContent"!==m&&"hidden"!==e.type,"$root"===s[0]&&(n=N,s=s.slice(1)),null==b||!v&&""===b||null!=p(n,s)||h(),v&&(i=function(){if(p(n,s)!==this[m])return h(),t.refreshImmediately()},$(e).on("input keyup change",i),d=function(){return $(e).off("input keyup change",i)}),{refresh:c,teardown:d}):{refresh:c}},"bind-show":function(t,e,n){var o,i;return o=D(n,"$context,$root,$arrayPointers",t),i=void 0,{refresh:function(){var n;if((n=!o.call(t,e,N,r(t,e)))!==i)return $(t).toggleClass("hide",i=n)}}},"bind-class":function(t,e,n){var o,i;return o=D(n,"$context,$root,$arrayPointers",t),i={},{refresh:function(){var n,u,a;u=o.call(t,e,N,r(t,e));for(n in u)a=u[n],!i[n]!=!a&&$(t).toggleClass(n,!!a);return i=u}}},"bind-attribute":function(t,e,n){var o,i;return o=D(n,"$context,$root,$arrayPointers",t),i={},{refresh:function(){var n,u,a;u=o.call(t,e,N,r(t,e));for(n in u)a=u[n],i[n]!==a&&$(t).attr(n,a||null);return i=u}}},define:function(t,e,n){var o,i,u,a;o=D(n,"$context,$root,$registry,$arrayPointers",t),u=o.call(t,e,N,P,r(t,e));for(i in u)a=u[i],e[i]=a},eval:function(t,e,n){var o;o=D(n,"$context,$root,$registry,$arrayPointers",t),o.call(t,e,N,P,r(t,e))}},a=function(t,e,r){var n,o,i,u,a;n=D(r,"$context,$root",t),u=n.call(t,e,N),o={};for(i in u){if(a=u[i],null==e[i]&&(e[i]=[]),!(e[i]instanceof Array))throw"Twine error: expected '"+i+"' to be an array";o[i]=e[i].length,e[i].push(a)}return o},I=function(e,n){var o;return o="checked"===e||"indeterminate"===e||"disabled"===e||"readOnly"===e||"draggable"===e,t.bindingTypes["bind-"+n.toLowerCase()]=function(t,n,i){var u,a;return u=D(i,"$context,$root,$arrayPointers",t),a=void 0,{refresh:function(){var i;if(i=u.call(t,n,N,r(t,n)),o&&(i=!!i),i!==a)return t[e]=a=i,"checked"===e?f(t):void 0}}}},R=["placeholder","checked","indeterminate","disabled","href","title","readOnly","src","draggable"],b=0,E=R.length;b<E;b++)n=R[b],I(n,n);for(I("innerHTML","unsafe-html"),k=function(e){var r;return!("submit"!==e.type&&"a"!==e.currentTarget.nodeName.toLowerCase()||"false"!==(r=t.getAttribute(e.currentTarget,"allow-default"))&&!1!==r&&0!==r&&void 0!==r&&null!==r)},q=function(e){return t.bindingTypes["bind-event-"+e]=function(n,o,i){var u;return u=function(u,a){var s,l;if(l="function"==typeof(s=t.shouldDiscardEvent)[e]?s[e](u):void 0,(l||k(u))&&u.preventDefault(),!l)return D(i,"$context,$root,$arrayPointers,event,data",n).call(n,o,N,r(n,o),u,a),t.refreshImmediately()},$(n).on(e,u),{teardown:function(){return $(n).off(e,u)}}}},G=["click","dblclick","mouseenter","mouseleave","mouseover","mouseout","mousedown","mouseup","submit","dragenter","dragleave","dragover","drop","drag","change","keypress","keydown","keyup","input","error","done","success","fail","blur","focus","load","paste"],m=0,x=G.length;m<x;m++)l=G[m],q(l);return t})}).call(this)});t(function(){window.Twine=n}),t(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=window.Twine,window.Bindings=null!=e["default"]?e["default"]:e}),t(function(t,n){"use strict";function o(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:function(){return{}};h=t}function i(t){try{location.href!==l&&(c={});var r=void 0;if(null!=h&&(r=h()||{},s["default"].reset(r),t||s["default"].bind(),h=null),t){var n=!0,o=!1,i=undefined;try{for(var u,a=t[Symbol.iterator]();!(n=(u=a.next()).done);n=!0){var d=u.value;s["default"].bind(d)}}catch(t){o=!0,i=t}finally{try{!n&&a["return"]&&a["return"]()}finally{if(o)throw i}}}var p=!0,v=!1,g=undefined;try{for(var b,m=f[Symbol.iterator]();!(p=(b=m.next()).done);p=!0){var y=e(b.value,2),w=y[0];(0,y[1])(w)}}catch(t){v=!0,g=t}finally{try{!p&&m["return"]&&m["return"]()}finally{if(v)throw g}}f.length=0,s["default"].refreshImmediately(),r&&"function"==typeof r.pageLoaded&&r.pageLoaded()}catch(t){throw t}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o;var u=r($),a=r(_),s=r(Twine),l=location.href,c={},f=[],h=void 0;o.getLastUrl=function(){return l},o.onRefresh=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var o=void 0,i=void 0;r[1]?(o=r[0],i=r[1]):i=r[0],o&&s["default"].afterBound(function(){var e=s["default"].contextKey(o,t),r=c[e];r&&f.push([r,i]),c[e]=t})},o.pushState=function(t){window.history.pushState({turbolinks:!0,url:t},null,t)},o.replaceState=function(t){window.history.replaceState({turbolinks:!0,url:t},null,t)},o.openPopup=function(t,e,r){var n={width:500,height:500,directories:"no",location:"no",menubar:"no",resizeable:"yes",scrollbars:"yes",toolbar:"no",status:"no"},i=a["default"].defaults(r,n),u=a["default"].map(i,function(t,e){return e+"="+t}).toString();o.open(t,e,u)},document.addEventListener("DOMContentLoaded",function(){return i()}),document.addEventListener("page:load",function(t){i(t.data),l=location.href}),document.addEventListener("page:before-partial-replace",function(t){var e=t.data,r=!0,n=!1,o=undefined;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var a=i.value;s["default"].unbind(a)}}catch(t){n=!0,o=t}finally{try{!r&&u["return"]&&u["return"]()}finally{if(n)throw o}}}),document.addEventListener("page:after-node-removed",function(t){return(0,u["default"])(t.data).remove()}),(0,u["default"])(document).ajaxComplete(function(){return s["default"].refresh()}),window.Page=null!=n["default"]?n["default"]:n});(function(){null==window.TurboGraft&&(window.TurboGraft={handlers:{}}),TurboGraft.tgAttribute=function(t){return"tg-"===t.slice(0,3)?"data-"+t:"data-tg-"+t},TurboGraft.getTGAttribute=function(t,e){var r;return r=TurboGraft.tgAttribute(e),t.getAttribute(r)||t.getAttribute(e)},TurboGraft.removeTGAttribute=function(t,e){var r;return r=TurboGraft.tgAttribute(e),t.removeAttribute(r),t.removeAttribute(e)},TurboGraft.hasTGAttribute=function(t,e){var r;return r=TurboGraft.tgAttribute(e),t.hasAttribute(r)||t.hasAttribute(e)},TurboGraft.querySelectorAllTGAttribute=function(t,e,r){var n;return null==r&&(r=null),n=TurboGraft.tgAttribute(e),r?t.querySelectorAll("["+n+"="+r+"], ["+e+"="+r+"]"):t.querySelectorAll("["+n+"], ["+e+"]")}}).call(this),function(){window.Click=function(){function t(t){this.event=t,this.event.defaultPrevented||(this._extractLink(),this._validForTurbolinks()&&(Turbolinks.visit(this.link.href),this.event.preventDefault()))}return t.installHandlerLast=function(e){if(!e.defaultPrevented)return document.removeEventListener("click",t.handle,!1),document.addEventListener("click",t.handle,!1)},t.handle=function(e){return new t(e)},t.prototype._extractLink=function(){var t;for(t=this.event.target;t.parentNode&&"A"!==t.nodeName;)t=t.parentNode;if("A"===t.nodeName&&0!==t.href.length)return this.link=new Link(t)},t.prototype._validForTurbolinks=function(){return null!=this.link&&!(this.link.shouldIgnore()||this._nonStandardClick())},t.prototype._nonStandardClick=function(){return this.event.which>1||this.event.metaKey||this.event.ctrlKey||this.event.shiftKey||this.event.altKey},t}()}.call(this),function(){window.ComponentUrl=function(){function t(e){if(this.original=null!=e?e:document.location.href,this.original.constructor===t)return this.original;this._parse()}return t.prototype.withoutHash=function(){return this.href.replace(this.hash,"")},t.prototype.withoutHashForIE10compatibility=function(){return this.withoutHash()},t.prototype.hasNoHash=function(){return 0===this.hash.length},t.prototype._parse=function(){var t;return(null!=this.link?this.link:this.link=document.createElement("a")).href=this.original,t=this.link,this.href=t.href,this.protocol=t.protocol,this.host=t.host,this.hostname=t.hostname,this.port=t.port,this.pathname=t.pathname,this.search=t.search,this.hash=t.hash,this.origin=[this.protocol,"//",this.hostname].join(""),0!==this.port.length&&(this.origin+=":"+this.port),this.relative=[this.pathname,this.search,this.hash].join(""),this.absolute=this.href},t}()}.call(this),function(){window.CSRFToken=function(){function t(){}return t.get=function(t){var e;return null==t&&(t=document),{node:e=t.querySelector('meta[name="csrf-token"]'),token:null!=e&&"function"==typeof e.getAttribute?e.getAttribute("content"):void 0}},t.update=function(t){var e;if(e=this.get(),null!=e.token&&null!=t&&e.token!==t)return e.node.setAttribute("content",t)},t}()}.call(this),function(){TurboGraft.Document={create:function(t){var e;return/<(html|body)/i.test(t)?(e=document.documentElement.cloneNode(),e.innerHTML=t):(e=document.documentElement.cloneNode(!0),e.querySelector("body").innerHTML=t),e.head=e.querySelector("head"),e.body=e.querySelector("body"),e}}}.call(this),function(){var t,e,r,n;e=function(t,e){return t.classList.contains(e)},r=function(t){return t.getAttribute("disabled")||e(t,"disabled")},n=function(t,e,r){var n,o;if(null==r&&(r=null),!(n=t.getAttribute("href")||t.getAttribute("action")))throw new Error("Turbograft developer error: You did not provide a URL ('"+urlAttribute+"' attribute) for data-tg-remote");return TurboGraft.getTGAttribute(t,"remote-once")&&(TurboGraft.removeTGAttribute(t,"remote-once"),TurboGraft.removeTGAttribute(t,"tg-remote")),o={httpRequestType:e,httpUrl:n,fullRefresh:null!=TurboGraft.getTGAttribute(t,"full-refresh"),refreshOnSuccess:TurboGraft.getTGAttribute(t,"refresh-on-success"),refreshOnSuccessExcept:TurboGraft.getTGAttribute(t,"full-refresh-on-success-except"),refreshOnError:TurboGraft.getTGAttribute(t,"refresh-on-error"),refreshOnErrorExcept:TurboGraft.getTGAttribute(t,"full-refresh-on-error-except")},new TurboGraft.Remote(o,r,t)},TurboGraft.handlers.remoteMethodHandler=function(t){var e,r,o;o=t.clickTarget,(e=TurboGraft.getTGAttribute(o,"tg-remote"))&&(t.preventDefault(),r=n(o,e),r.submit())},TurboGraft.handlers.remoteFormHandler=function(t){var e,r,o;o=t.target,e=o.getAttribute("method"),TurboGraft.hasTGAttribute(o,"tg-remote")&&(t.preventDefault(),r=n(o,e,o),r.submit())},t=function(t,e,n){return null==n&&(n=!1),document.addEventListener(t,function(t){var n,o;for(o=t.target;o!==document&&null!=o;){if(("A"===o.nodeName||"BUTTON"===o.nodeName)&&(n=r(o),n&&t.preventDefault(),!n))return t.clickTarget=o,void e(t);o=o.parentNode}})},t("click",TurboGraft.handlers.remoteMethodHandler,!0),document.addEventListener("submit",function(t){return TurboGraft.handlers.remoteFormHandler(t)})}.call(this),function(){var t=function(t,r){function n(){this.constructor=t}for(var o in r)e.call(r,o)&&(t[o]=r[o]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t},e={}.hasOwnProperty,r=[].slice;window.Link=function(e){function n(t){if(this.link=t,this.link.constructor===n)return this.link;this.original=this.link.href,n.__super__.constructor.apply(this,arguments)}return t(n,e),n.HTML_EXTENSIONS=["html"],n.allowExtensions=function(){var t,e,o,i;for(e=1<=arguments.length?r.call(arguments,0):[],o=0,i=e.length;o<i;o++)t=e[o],n.HTML_EXTENSIONS.push(t);return n.HTML_EXTENSIONS},n.prototype.shouldIgnore=function(){return this._crossOrigin()||this._anchored()||this._nonHtml()||this._optOut()||this._target()},n.prototype._crossOrigin=function(){return this.origin!==(new ComponentUrl).origin},n.prototype._anchored=function(){var t;return(this.hash&&this.withoutHash())===(t=new ComponentUrl).withoutHash()||this.href===t.href+"#"},n.prototype._nonHtml=function(){return this.pathname.match(/\.[a-z]+$/g)&&!this.pathname.match(new RegExp("\\.(?:"+n.HTML_EXTENSIONS.join("|")+")?$","g"))},n.prototype._optOut=function(){var t,e;for(e=this.link;!t&&e!==document&&null!==e;)t=null!=e.getAttribute("data-no-turbolink"),e=e.parentNode;return t},n.prototype._target=function(){return 0!==this.link.target.length},n}(ComponentUrl)}.call(this),function(){var t,e,r;window.Page||(window.Page={}),Page.visit=function(t,e){return null==e&&(e={}),e.reload?window.location=t:Turbolinks.visit(t)},Page.refresh=function(t,e){var r,n,o,i;return null==t&&(t={}),r=t.url?t.url:t.queryParams?(n=$.param(t.queryParams),n&&(n="?"+n),location.pathname+n):location.href,o={partialReplace:!0,exceptKeys:t.exceptKeys,onlyKeys:t.onlyKeys,updatePushState:t.updatePushState,callback:e},(i=t.response)?Turbolinks.loadPage(null,i,o):Turbolinks.visit(r,o)},Page.open=function(){return window.open.apply(window,arguments)},r=[],Page.onReplace=function(t,n){if(!t||!n)throw new Error("Page.onReplace: Node and callback must both be specified");if(!e(n))throw new Error("Page.onReplace: Callback must be a function");return r.push({node:t,callback:n})},e=function(t){return!!(t&&t.constructor&&t.call&&t.apply)},t=function(t,e){return t.contains?t.contains(e):!!(t===e||t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)},document.addEventListener("page:before-partial-replace",function(e){var n,o,i,u,a,s,l,c,f;for(c=e.data,f=[],i=0,a=r.length;i<a;i++){for(n=r[i],o=!1,u=0,s=c.length;u<s;u++)if(l=c[u],t(l,n.node)){n.callback(),o=!0;break}o||f.push(n)}return r=f}),document.addEventListener("page:before-replace",function(){var t,e,n;for(e=0,n=r.length;e<n;e++)t=r[e],t.callback();return r=[]})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};TurboGraft.Remote=function(){function e(e,r,n){var o,i,u,a;this.opts=e,this.onError=t(this.onError,this),this.onSuccess=t(this.onSuccess,this),this.initiator=r||n,this.actualRequestType="get"===(null!=(i=this.opts.httpRequestType)?i.toLowerCase():void 0)?"GET":"POST",this.useNativeEncoding=this.opts.useNativeEncoding,this.formData=this.createPayload(r),this.opts.refreshOnSuccess&&(this.refreshOnSuccess=this.opts.refreshOnSuccess.split(" ")),this.opts.refreshOnSuccessExcept&&(this.refreshOnSuccessExcept=this.opts.refreshOnSuccessExcept.split(" ")),this.opts.refreshOnError&&(this.refreshOnError=this.opts.refreshOnError.split(" ")),this.opts.refreshOnErrorExcept&&(this.refreshOnErrorExcept=this.opts.refreshOnErrorExcept.split(" ")),a=new XMLHttpRequest,"GET"===this.actualRequestType?(u=this.formData?this.opts.httpUrl+"?"+this.formData:this.opts.httpUrl,a.open(this.actualRequestType,u,!0)):a.open(this.actualRequestType,this.opts.httpUrl,!0),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.setRequestHeader("Accept","text/html, application/xhtml+xml, application/xml"),this.contentType&&a.setRequestHeader("Content-Type",this.contentType),a.setRequestHeader("X-XHR-Referer",document.location.href),o=CSRFToken.get().token,o&&a.setRequestHeader("X-CSRF-Token",o),triggerEventFor("turbograft:remote:init",this.initiator,{xhr:a,initiator:this.initiator}),a.addEventListener("loadstart",function(t){return function(){return triggerEventFor("turbograft:remote:start",t.initiator,{xhr:a})}}(this)),a.addEventListener("error",this.onError),a.addEventListener("load",function(t){return function(e){return a.status<400?t.onSuccess(e):t.onError(e)}}(this)),a.addEventListener("loadend",function(t){return function(){var e;return"function"==typeof(e=t.opts).done&&e.done(),triggerEventFor("turbograft:remote:always",t.initiator,{initiator:t.initiator,xhr:a})}}(this)),this.xhr=a}return e.prototype.submit=function(){return this.xhr.send(this.formData)},e.prototype.createPayload=function(t){var e;return e=t?this.useNativeEncoding||t.querySelectorAll("[type='file'][name]").length>0?this.nativeEncodeForm(t):this.uriEncodeForm(t):"",e instanceof FormData||(this.contentType="application/x-www-form-urlencoded; charset=UTF-8",-1===e.indexOf("_method")&&this.opts.httpRequestType&&"GET"!==this.actualRequestType&&(e=this.formAppend(e,"_method",this.opts.httpRequestType))),e},e.prototype.formAppend=function(t,e,r){return t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(r)},e.prototype.uriEncodeForm=function(t){var e;return e="",this._iterateOverFormInputs(t,function(t){return function(r){return e=t.formAppend(e,r.name,r.value)}}(this)),e},e.prototype.formDataAppend=function(t,e){var r,n,o,i;if("file"===e.type)for(i=e.files,n=0,o=i.length;n<o;n++)r=i[n],t.append(e.name,r);else t.append(e.name,e.value);return t},e.prototype.nativeEncodeForm=function(t){var e;return e=new FormData,this._iterateOverFormInputs(t,function(t){return function(r){return e=t.formDataAppend(e,r)}}(this)),e},e.prototype._iterateOverFormInputs=function(t,e){var r,n,o,i,u,a,s;for(i=this._enabledInputs(t),s=[],r=0,u=i.length;r<u;r++)n=i[r],o=!n.disabled,a="checkbox"===n.type||"radio"===n.type,o&&n.name&&(a&&n.checked||!a)?s.push(e(n)):s.push(void 0);return s},e.prototype._enabledInputs=function(t){var e,r,n,o,i,u,a,s,l,c,f;if(f="input:not([type='reset']):not([type='button']):not([type='submit']):not([type='image']), select, textarea",u=Array.prototype.slice.call(t.querySelectorAll(f)),r=Array.prototype.slice.call(TurboGraft.querySelectorAllTGAttribute(t,"tg-remote-noserialize")),!r.length)return u;for(e=r,o=0,s=r.length;o<s;o++)c=r[o],e=e.concat(Array.prototype.slice.call(c.querySelectorAll(f)));for(n=[],a=0,l=u.length;a<l;a++)i=u[a],e.indexOf(i)<0&&n.push(i);return n},e.prototype.onSuccess=function(t){var e,r,n;return"function"==typeof(e=this.opts).success&&e.success(),n=t.target,triggerEventFor("turbograft:remote:success",this.initiator,{initiator:this.initiator,xhr:n}),(r=n.getResponseHeader("X-Next-Redirect"))?void Page.visit(r,{reload:!0}):TurboGraft.hasTGAttribute(this.initiator,"tg-remote-norefresh")?void 0:this.opts.fullRefresh&&this.refreshOnSuccess?Page.refresh({onlyKeys:this.refreshOnSuccess}):this.opts.fullRefresh?Page.refresh():this.refreshOnSuccess?Page.refresh({response:n,onlyKeys:this.refreshOnSuccess}):this.refreshOnSuccessExcept?Page.refresh({response:n,exceptKeys:this.refreshOnSuccessExcept}):Page.refresh({response:n})},e.prototype.onError=function(t){var e,r;return"function"==typeof(e=this.opts).fail&&e.fail(),r=t.target,triggerEventFor("turbograft:remote:fail",this.initiator,{initiator:this.initiator,xhr:r}),TurboGraft.hasTGAttribute(this.initiator,"tg-remote-norefresh")?triggerEventFor("turbograft:remote:fail:unhandled",this.initiator,{xhr:r}):this.opts.fullRefresh&&this.refreshOnError?Page.refresh({onlyKeys:this.refreshOnError}):this.opts.fullRefresh?Page.refresh():this.refreshOnError?Page.refresh({response:r,onlyKeys:this.refreshOnError}):this.refreshOnErrorExcept?Page.refresh({response:r,exceptKeys:this.refreshOnErrorExcept}):triggerEventFor("turbograft:remote:fail:unhandled",this.initiator,{xhr:r})},e}()}.call(this),function(){TurboGraft.Response=function(){function t(t,e){var r;this.xhr=t,r=e&&e.withoutHash()!==this.xhr.responseURL?this.xhr.responseURL:this.xhr.getResponseHeader("X-XHR-Redirected-To"),this.finalURL=r||e}return t.prototype.valid=function(){return this.hasRenderableHttpStatus()&&this.hasValidContent()},t.prototype.document=function(){if(this.valid())return TurboGraft.Document.create(this.xhr.responseText)},t.prototype.hasRenderableHttpStatus=function(){var t;return 422===this.xhr.status||!(400<=(t=this.xhr.status)&&t<600)},t.prototype.hasValidContent=function(){var t;if(t=this.xhr.getResponseHeader("Content-Type"))return t.match(/^(?:text\/html|application\/xhtml\+xml|application\/xml)(?:;|$)/);throw new Error("Error encountered for XHR Response: "+this)},t.prototype.toString=function(){return"URL: "+this.xhr.responseURL+", ReadyState: "+this.xhr.readyState+", Headers: "+this.xhr.getAllResponseHeaders()},t}(),TurboGraft.location=function(){return location.href}}.call(this),function(){var t,e,r,n,o,i,u,a,s,l,c,f,h,d,p,v=function(t,e){return function(){return t.apply(e,arguments)}};e="[data-turbolinks-track]",r="turbolinksTrack",t="true",f={},c=null,p=function(){var t;return t=Object.keys(f).map(function(t){return f[t]}),Promise.all(t)},TurboGraft.TurboHead=function(){function e(t,e){this.activeDocument=t,this.upstreamDocument=e,this._insertNewAssets=v(this._insertNewAssets,this),this.activeAssets=u(this.activeDocument),this.upstreamAssets=u(this.upstreamDocument),this.newScripts=this.upstreamAssets.filter(n("nodeName","SCRIPT")).filter(s("src",this.activeAssets)),this.newLinks=this.upstreamAssets.filter(n("nodeName","LINK")).filter(s("href",this.activeAssets))}return e._testAPI={reset:function(){return f={},c=null}},e.prototype.hasChangedAnonymousAssets=function(){var e,n,i,u;return n=this.upstreamAssets.filter(o(r,t)),e=this.activeAssets.filter(o(r,t)),e.length!==n.length||(u=s("src",n),i=s("href",n),e.some(function(t){return u(t)||i(t)}))},e.prototype.movingFromTrackedToUntracked=function(){return 0===this.upstreamAssets.length&&this.activeAssets.length>0},e.prototype.hasNamedAssetConflicts=function(){return this.newScripts.concat(this.newLinks).filter(l(r,t)).some(i(r,this.activeAssets))},e.prototype.hasAssetConflicts=function(){return this.movingFromTrackedToUntracked()||this.hasNamedAssetConflicts()||this.hasChangedAnonymousAssets()},e.prototype.waitForAssets=function(){return"function"==typeof c&&c({isCanceled:!0}),new Promise(function(t){return function(e){return c=e,p().then(t._insertNewAssets).then(p).then(e)}}(this))},e.prototype._insertNewAssets=function(){return h(this.activeDocument,this.newLinks),d(this.activeDocument,this.newScripts)},e}(),u=function(t){return[].slice.call(t.querySelectorAll(e))},n=function(t,e){return function(r){return r[t]===e}},s=function(t,e){return function(r){return!e.some(function(e){return r[t]===e[t]})}},o=function(t,e){return function(r){return r.dataset[t]===e}},l=function(t,e){return function(r){return r.dataset[t]!==e}},i=function(t,e){return function(r){var n;return n=r.dataset[t],e.some(o(t,n))}},h=function(t,e){return e.forEach(function(e){var r;return r=e.cloneNode(),t.head.appendChild(r),triggerEvent("page:after-link-inserted",r)})},d=function(t,e){var r;return r=Promise.resolve(),e.forEach(function(e){return r=r.then(function(){return a(t,e)})}),r},a=function(t,e){var r,n,o,i,u,a;if(a=e.src,f[a])return f[a];for(i=t.createElement("SCRIPT"),u=e.attributes,n=0,o=u.length;n<o;n++)r=u[n],i.setAttribute(r.name,r.value);return i.appendChild(t.createTextNode(e.innerHTML)),f[a]=new Promise(function(e){var r;return r=function(t){return"error"===t.type&&triggerEvent("page:#script-error",t),i.removeEventListener("load",r),i.removeEventListener("error",r),e()},i.addEventListener("load",r),i.addEventListener("error",r),t.head.appendChild(i),triggerEvent("page:after-script-inserted",i)})}}.call(this),function(){var t,e,r,n,o,i,u,a,s,l,c,f,h,d,p,v;t=TurboGraft.Response,e=TurboGraft.TurboHead,l=window.jQuery,v=null,r=document,a=function(){return r.addEventListener("DOMContentLoaded",function(){return triggerEvent("page:change"),triggerEvent("page:update")},!0)},s=function(){if(void 0!==l)return l(r).on("ajaxSuccess",function(t,e){if(l.trim(e.responseText))return triggerEvent("page:update")})},u=void 0!==window.history.state||navigator.userAgent.match(/Firefox\/2[6|7]/),o=window.history&&window.history.pushState&&window.history.replaceState&&u,window.triggerEvent=function(t,e){var n;return n=r.createEvent("Events"),e&&(n.data=e),n.initEvent(t,!0,!0),r.dispatchEvent(n)},window.triggerEventFor=function(t,e,n){var o;return o=r.createEvent("Events"),n&&(o.data=n),o.initEvent(t,!0,!0),e.dispatchEvent(o)},c=function(t){var e,n;return n=(null!=(e=r.cookie.match(new RegExp(t+"=(\\w+)")))?e[1].toUpperCase():void 0)||"",r.cookie=t+"=; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/",n},p="GET"===(f=c("request_method"))||""===f,i=o&&p,n=r.addEventListener&&r.createEvent,n&&(a(),s()),d=function(t,e){var r;return r=e.parentNode.replaceChild(t,e),triggerEvent("page:after-node-removed",r)},h=function(t){var e;return e=t.parentNode.removeChild(t),triggerEvent("page:after-node-removed",e)},window.Turbolinks=function(){function n(){}var o,u,a,s,l,c,f,p,g,b,m,y,w,T,E,x,A,S,k,R,G,C,L,P;return s=null,A=null,p=function(t,e){if(null==e&&(e={}),!E(t))return t=new ComponentUrl(t),G(),g(t,e)},w=function(t,e){var r,n;return Boolean(e.partialReplace||(null!=(r=e.onlyKeys)?r.length:void 0)||(null!=(n=e.exceptKeys)?n.length:void 0))},n.fullPageNavigate=function(t){null!=t&&(t=new ComponentUrl(t).absolute,triggerEvent("page:before-full-refresh",{url:t}),r.location.href=t)},n.pushState=function(t,e,r){return window.history.pushState(t,e,r)},n.replaceState=function(t,e,r){return window.history.replaceState(t,e,r)},n.document=function(t){return t&&(r=t),r},g=function(t,e){var r,o,i;triggerEvent("page:fetch",{url:t.absolute}),null!=v&&(v.readyState=0,v.statusText="abort",v.abort()),v=new XMLHttpRequest,v.open("GET",t.withoutHashForIE10compatibility(),!0),v.setRequestHeader("Accept","text/html, application/xhtml+xml, application/xml"),v.setRequestHeader("X-XHR-Referer",A),null==e.headers&&(e.headers={}),o=e.headers;for(r in o)i=o[r],v.setRequestHeader(r,i);v.onload=function(){return v.status>=500?n.fullPageNavigate(t):n.loadPage(t,v,e),v=null},v.onerror=function(){return"abort"===v.statusText?void(v=null):n.fullPageNavigate(t)},v.send()},n.loadPage=function(o,i,u){var a,s,l;return null==u&&(u={}),triggerEvent("page:receive"),a=new t(i,o),null==u.updatePushState&&(u.updatePushState=!0),u.partialReplace=w(a,u),(l=a.document())?u.partialReplace?void P(l,a,u):(s=new e(r,l),s.hasAssetConflicts()?n.fullPageNavigate(a.finalURL):s.waitForAssets().then(function(t){if(!(null!=t?t.isCanceled:void 0))return P(l,a,u)})):(triggerEvent("page:error",i),void n.fullPageNavigate(a.finalURL))},P=function(t,e,r){var o,i;return o=a(null!=(i=t.querySelector("title"))?i.textContent:void 0,C(t.querySelector("body")),CSRFToken.get(t).token,"runScripts",r),r.updatePushState&&S(e.finalURL),r.partialReplace||n.resetScrollPosition(),"function"==typeof r.callback&&r.callback(),triggerEvent("page:load",o)},a=function(t,e,n,i,u){var a,c,h,p;if(null==u&&(u={}),t&&(r.title=t),null!=(h=u.onlyKeys)?h.length:void 0)return c=[].concat(m(),b(u.onlyKeys)),a=R(c,e),o(a)&&L(),a;R(m(),e),x(e),(null!=(p=u.exceptKeys)?p.length:void 0)?k(u.exceptKeys,e):l(e),triggerEvent("page:before-replace"),d(e,r.body),null!=n&&CSRFToken.update(n),L(),i&&f(),s=window.history.state,triggerEvent("page:change"),triggerEvent("page:update")},b=function(t){var e,n,o,i,u,a,s,l;for(a=[],e=0,i=t.length;e<i;e++)for(o=t[e],l=TurboGraft.querySelectorAllTGAttribute(r,"refresh",o),n=0,u=l.length;n<u;n++)s=l[n],a.push(s);return a},m=function(){var t,e,n,o,i;for(n=[],i=TurboGraft.querySelectorAllTGAttribute(r,"refresh-always"),t=0,e=i.length;t<e;t++)o=i[t],n.push(o);return n},o=function(t){var e,r,n;for(e=0,r=t.length;e<r;e++)if(n=t[e],n.querySelectorAll("input[autofocus], textarea[autofocus]").length>0)return!0;return!1},L=function(){var t,e
;if((t=(e=r.querySelectorAll("input[autofocus], textarea[autofocus]"))[e.length-1])&&r.activeElement!==t)return t.focus()},l=function(t){var e,r,n,o;for(o=TurboGraft.querySelectorAllTGAttribute(t,"refresh-never"),e=0,r=o.length;e<r;e++)n=o[e],h(n)},R=function(t,e){var r,n,o,i,u,a,s;for(triggerEvent("page:before-partial-replace",t),a=function(e){var r,n,o;for(r=0,n=t.length;r<n;r++)if(o=t[r],e!==o&&o.contains(e))return!0;return!1},s=[],n=0,o=t.length;n<o;n++)if(r=t[n],!a(r)){if(!(u=r.getAttribute("id")))throw new Error("Turbolinks refresh: Refresh key elements must have an id.");(i=e.querySelector("#"+u))?(i=i.cloneNode(!0),d(i,r),"SCRIPT"===i.nodeName&&"false"!==i.dataset.turbolinksEval?c(i):s.push(i)):TurboGraft.hasTGAttribute(r,"refresh-always")||h(r)}return s},T=function(t,e){var r,n,o,i,u,a;for(a=[],n=0,o=e.length;n<o;n++){if(r=e[n],!(i=r.getAttribute("id")))throw new Error("TurboGraft refresh: Kept nodes must have an id.");(u=t.querySelector("#"+i))?a.push(d(r,u)):a.push(void 0)}return a},x=function(t){var e,n,o,i,u;for(e=[],u=TurboGraft.querySelectorAllTGAttribute(r,"tg-static"),n=0,o=u.length;n<o;n++)i=u[n],e.push(i);T(t,e)},k=function(t,e){var n,o,i,u,a,s,l,c;for(n=[],o=0,a=t.length;o<a;o++)for(u=t[o],c=TurboGraft.querySelectorAllTGAttribute(r,"refresh",u),i=0,s=c.length;i<s;i++)l=c[i],n.push(l);T(e,n)},f=function(){var t,e,n,o,i;for(i=Array.prototype.slice.call(r.body.querySelectorAll('script:not([data-turbolinks-eval="false"])')),t=0,e=i.length;t<e;t++)o=i[t],""!==(n=o.type)&&"text/javascript"!==n||c(o)},c=function(t){var e,n,o,i,u,a,s;for(n=r.createElement("script"),s=t.attributes,o=0,i=s.length;o<i;o++)e=s[o],n.setAttribute(e.name,e.value);n.appendChild(r.createTextNode(t.innerHTML)),a=t.parentNode,u=t.nextSibling,a.removeChild(t),a.insertBefore(n,u)},C=function(t){return t.innerHTML=t.innerHTML.replace(/<noscript[\S\s]*?<\/noscript>/gi,""),t},S=function(t){(t=new ComponentUrl(t)).absolute!==A&&n.pushState({turbolinks:!0,url:t.absolute},"",t.absolute)},G=function(){return A=r.location.href},n.rememberCurrentUrl=function(){return n.replaceState({turbolinks:!0,url:r.location.href},"",r.location.href)},n.rememberCurrentState=function(){return s=window.history.state},function(t){return window.scrollTo(t.positionX,t.positionY)},n.resetScrollPosition=function(){return r.location.hash?r.location.href=r.location.href:window.scrollTo(0,0)},E=function(t){return!triggerEvent("page:before-change",t)},y=function(t){var e;if(null!=(e=t.state)?e.turbolinks:void 0)return n.visit(t.target.location.href)},u=function(t){return setTimeout(t,500)},i?(n.visit=p,n.rememberCurrentUrl(),n.rememberCurrentState(),r.addEventListener("click",Click.installHandlerLast,!0),u(function(){return window.addEventListener("popstate",y,!1)})):n.visit=function(t){return r.location.href=t},n}()}.call(this);t(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=window.Turbograft,window.Turbograft=null!=e["default"]?e["default"]:e}),t(function(){"use strict";window.Bugsnag&&(window.Bugsnag.metaData.bundles.tnt=!0)})}("undefined"!=typeof global?global:"undefined"!=typeof window&&window);