!function(){var t=function(t){var e={exports:{}};return t.call(e.exports,e,e.exports),e.exports},e=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},n=function(t){return t&&t.__esModule?t:{"default":t}},a=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e["default"]=t,e},r=function t(e,i,n){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,i);if(a===undefined){var o=Object.getPrototypeOf(e);return null===o?undefined:t(o,i,n)}if("value"in a)return a.value;var s=a.get;return s===undefined?undefined:s.call(n)},l=function(){function t(t,e){var i=[],n=!0,a=!1,o=undefined;try{for(var s,r=t[Symbol.iterator]();!(n=(s=r.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){a=!0,o=t}finally{try{!n&&r["return"]&&r["return"]()}finally{if(a)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=Shopify.Components,h=Shopify.Loading,d=Shopify.Keycodes,c=Shopify.hotshot,f=Shopify.Browser,p=Shopify.Time,m=Shopify.Money,v=Shopify.Number,y=Shopify.AnalyticsAPI,g=Shopify.Inflection,E=Shopify.routes,T=Shopify.range,O=window.Page;(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Shopify.Remote=function(){function e(e,i,n,a){this.ajaxOptions=null!=e?e:{},this.refreshOnSuccess=i,this.refreshOnError=n,this.fullRefresh=null!=a&&a,this.submit=t(this.submit,this)}return e.prototype.submit=function(){var t;Shopify.Loading.start(),t=$.ajax(this.ajaxOptions),t.always(function(){return Shopify.Loading.stop()}),t.done(function(t){return function(e,i,n){var a,o,s;return(a=n.getResponseHeader("X-Next-Redirect"))?void Page.visit(a,{reload:!0}):(null!=(o=t.ajaxOptions.done)&&o.apply(null,arguments),s=t.refreshOnSuccess?t.refreshOnSuccess.split(" "):[],t.fullRefresh?Page.refresh({onlyKeys:s}):"false"!==t.refreshOnSuccess?Page.refresh({response:n,onlyKeys:s}):void 0)}}(this)),t.fail(function(t){return function(e,i,n){var a;if(null!=(a=t.ajaxOptions.fail)&&a.apply(null,arguments),"false"!==t.refreshOnError)return t.refreshOnError?Page.refresh({response:e,onlyKeys:t.refreshOnError.split(" ")}):Shopify.handleError(e,i,n)}}(this))},e}()}).call(this),function(){Shopify.DashboardActivity=function(){function t(t){this.activityFilter=t||"all"}return t.prototype.activityLoading=!1,t.prototype.loadMoreActivity=function(t){return this.activityLoading=!0,this.xhr&&this.xhr.abort(),this.xhr=$.ajax({dataType:"html",data:{activity_pages:t,activity_filter:this.activityFilter},url:"/admin/dashboard/activity_feed",success:function(t){return function(){return Page.refresh({onlyKeys:["dashboardActivity"],response:t.xhr})}}(this),done:function(){return this.activityLoading=!1}}),this.xhr.fail(Shopify.handleError)},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Shopify.SummaryReport=function(){function e(e,i){var n;null==i&&(i={}),this.changeChannelProvider=t(this.changeChannelProvider,this),this.changeDateRange=t(this.changeDateRange,this),this.$node=$(e),this.queryProps||(this.queryProps={startDate:"-30d",endDate:"-1d",channelFilter:""}),n=Object.assign({},i.actionConfig),n[Shopify.SummaryReportChannelpicker.CHANNEL_CHANGED_EVENT]=this.changeChannelProvider,Shopify.rootDispatcher.register(n).bindToNode(e),this.initializeView(),this._load()}return e.prototype.FINANCES_PATH="finances/show",e.prototype.queries=function(){throw new Error("Subclasses must define at least one shopifyQL query.")},e.prototype.initializeView=function(){},e.prototype.createTemplate=function(t){var e;return e=this.$node.find(t).remove(),_.template(e.html())},e.prototype.append=function(t,e){return this.$node.empty(),this.$node.append(t(e))},e.prototype.extractKey=function(t){var e,i;return e=t.query.columns[0].field,i=Shopify.Inflection.classify(e),i.charAt(0).toLowerCase()+i.substring(1)},e.prototype.changeDateRange=function(t){var e,i,n;return i=t.data,n=i.startDate,e=i.endDate,this.queryProps.startDate=n,this.queryProps.endDate=e,this._load()},e.prototype.changeChannelProvider=function(t){var e,i,n;return n=t.data.split("-"),e=n[0],i=n[1],"all"===e?this.queryProps.channelFilter="":"other"===e?this.queryProps.channelFilter="WHERE channel_provider_id == 0":(this.queryProps.channelFilter="WHERE api_client_id == "+e,i&&(this.queryProps.channelFilter+=" AND location_id == '"+i+"'")),this._load()},e.prototype._load=function(){var t,e;return this.renderLoading&&this.renderLoading(),t=this.queries(),Promise.all(function(){var i;i=[];for(e in t)i.push(Shopify.AnalyticsAPI.query(t[e]));return i}()).then(this.renderResult.bind(this))["catch"](this.renderError.bind(this))},e.prototype.renderResult=function(){throw new Error("Subclasses must handle successful query results.")},e.prototype.renderError=function(){throw new Error("Subclasses must handle failed query results.")},e}()}.call(this),function(){var t,e,i,n=function(t,e){return function(){return t.apply(e,arguments)}};e="reports:channelpicker:channel-changed",t="reports:channelpicker:after-channel-changed",i="SHOW orders\nFROM sales\nWHERE financial_status != 'refunded'\nSINCE -90d\nUNTIL 0d",Shopify.SummaryReportChannelpicker=function(){function a(t,e){this._onChannelChanged=n(this._onChannelChanged,this),this.channelLabels={},this.$node=$(t),e.forEach(function(t){return function(e){var i,n;return i=e.id.split("-")[1],i?(n=e.name.indexOf("\u2014"),t.channelLabels[e.id]=e.name.substring(n+1)):t.channelLabels[e.id]=e.name}}(this)),Shopify.rootDispatcher.register(Shopify.SummaryReportChannelpicker.CHANNEL_CHANGED_EVENT,this._onChannelChanged).bindToNode(t),this._checkForOtherOrders()}return a.CHANNEL_CHANGED_EVENT=e,a.AFTER_CHANNEL_CHANGED_EVENT=t,a.prototype.setChannel=function(t){return this.currentChannelId=t,Shopify.rootDispatcher.dispatch({type:e,data:this.currentChannelId}),Shopify.UIPopover.deactivate()},a.prototype._onChannelChanged=function(e){return this.currentChannelId=e.data,this.currentChannelLabel=this.channelLabels[this.currentChannelId],Shopify.rootDispatcher.dispatch({type:t,data:this.currentChannelId})},a.prototype._checkForOtherOrders=function(){return Shopify.AnalyticsAPI.query(i).then(function(t){return function(e){if(e.result.data[0][0]>0)return t.$node.find(".js-other-channel").removeClass("hide")}}(this))},a}()}.call(this);var D=(t(function(t,n){"use strict";function a(t,e){$.ajax({url:t,type:"POST",data:e||{}})}Object.defineProperty(n,"__esModule",{value:!0});var o="https://youtube.com/embed",s=function(){function t(e,n){i(this,t),this.$node=$(e),this.options=n,this.videoVisible=!1}return e(t,[{key:"removeVideo",value:function(){this.$node.html(""),this.videoVisible=!1}},{key:"render",value:function(){this.$node.html(""),this.videoVisible=!0,$("<iframe>",{src:o+"/"+this.options.videoId+(this.options.videoParams||""),frameborder:0,allowfullscreen:""}).appendTo(this.$node),a(this.options.trackingUrl,this.options.trackingData)}}]),t}();n["default"]=s,Shopify.YoutubePlayer=null!=n["default"]?n["default"]:n}),t(function(t,n){"use strict";function a(t){var e=document.createElement("iframe");return e.id=t,e.src=o(t),e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen",!0),e}function o(t){return r+"/"+t+"?"+l.join("&")+"&autoplay=true&player_id="+t}function s(t,e){$.ajax({url:t,type:"POST",data:e||{}})}Object.defineProperty(n,"__esModule",{value:!0});var r="https://player.vimeo.com/video",l=["title=0","byline=0","portrait=0","api=1"],u=function(){function t(e,n){i(this,t),this.node=e,this.options=n,this.videoVisible=!1}return e(t,[{key:"removeVideo",value:function(){this.videoVisible=!1,this.iframe.remove()}},{key:"render",value:function(){this.iframe=a(this.options.videoId),this.node.appendChild(this.iframe),this.videoVisible=!0,s(this.options.trackingUrl,this.options.trackingData)}}]),t}();n["default"]=u,Shopify.VimeoPlayer=null!=n["default"]?n["default"]:n}),t(function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=n(_),s=n($),r=2,l=250,u=function(){function t(e){i(this,t),this.cleanup=this.cleanup.bind(this),this._consumedCards=this._consumedCards.bind(this),this._recordConsumedCards=this._recordConsumedCards.bind(this),this._resetTimer=this._resetTimer.bind(this),this.throttledFunction=o["default"].throttle(this._resetTimer,l),this.recentlyConsumedCards=new Set,this.requestId=e.requestId,this.$window=(0,s["default"])(window),Page.onReplace((0,s["default"])(".page")[0],this.cleanup)}return e(t,[{key:"watch",value:function(){this.$window.on("scroll",this.throttledFunction),this._startTimer()}},{key:"cleanup",value:function(){this._clearTimer(),this.$window.off("scroll",this.throttledFunction)}},{key:"_consumedCards",value:function(){var t=this,e=[];return(0,s["default"])(".ui-feed__item--card").each(function(i,n){var a=(0,s["default"])(n),o=a.data("handle"),r=a.data("analytics-group"),l=i+1;t._isOnScreen(a)&&!t.recentlyConsumedCards.has(o)&&e.push({handle:o,analytics_group:r,position:l})}),e}},{key:"_recordConsumedCards",value:function(){var t=this,e=this._consumedCards();e.forEach(function(e){return t.recentlyConsumedCards.add(e.handle)}),e.length>0&&this._submitConsumedCards(e)}},{key:"_isOnScreen",value:function(t){var e=(0,s["default"])(".header").height()+(0,s["default"])("#turbo").height(),i=this.$window.scrollTop(),n={top:i+e,bottom:i+this.$window.height()},a=t.offset();return a.bottom=a.top+t.outerHeight(),a.top>=n.top&&a.bottom<=n.bottom}},{key:"_startTimer",value:function(){this.timeout=window.setTimeout(this._recordConsumedCards,1e3*r)}},{key:"_clearTimer",value:function(){this.timeout&&window.clearTimeout(this.timeout),this.timeout=null}},{key:"_resetTimer",value:function(){this._clearTimer(),this._startTimer()}},{key:"_submitConsumedCards",value:function(t){s["default"].ajax({url:"/admin/home/consume_cards",data:JSON.stringify({cards:t,original_request_id:this.requestId}),type:"POST",contentType:"application/json"})}}]),t}();a["default"]=u,Shopify.CardConsumption=null!=a["default"]?a["default"]:a}),t(function(t,e){"use strict";function i(t,e){var i=500,n=400,a=screen.width/2-i/2,o=screen.height/2-n/2,s=["width="+i,"height="+n,"left="+a,"top="+o,"toolbar=no","location=no","directories=no","status=no","menubar=no","scrollbars=yes","copyhistory=no","resizable=yes"];window.open(t,e,s.join(" "))}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i,Shopify.CenterPopup=null!=e["default"]?e["default"]:e}),t(function(t,a){"use strict";function o(t,e){l["default"].ajax({url:e,type:"POST",data:t})}Object.defineProperty(a,"__esModule",{value:!0});var s=n(Twine),r=n(_),l=n($),h={VOTE_DIALOG_HEADER:"next-card--home-card-feedback",VOTE_DIALOG_SURVEY:"js-home-vote-dialog-survey",VOTE_DIALOG_UPVOTE_THANKS:"js-home-vote-dialog-upvote-thanks",VOTE_DIALOG_DOWNVOTE_THANKS:"js-home-vote-dialog-downvote-thanks",FEEDBACK_OVERLAY:"home-card-overlay--feedback",FEEDBACK_COMMENT_BOX:"js-feedback-comment",FEEDBACK_OPTION:"feedback-form__item",FEEDBACK_OPTION_WRAPPER:"feedback-form",UNDO_OVERLAY:"js-home-card-undo-overlay",FEEDBACK_MENU:"js-feedback-menu",DROPDOWN_BUTTON:"js-dropdown-button",CARD:"next-card",HIDE:"hide",INVISIBLE:"feedback-overlay--invisible",POPOVER_BUTTON:"btn--popover-activator",UNDO_FEEDBACK:"feedback-overlay",FEEDBACK_BODY:"feedback-overlay__body",FEEDBACK_UNDO:"feedback-overlay__undo",FEED_ITEM:"ui-feed__item",FEEDBACK_FORM:"feedback-form"},d={UPVOTE:1,DOWNVOTE:0},c={ANIMATION:200,HIDE_CARD:2500,HIDE_VOTE_DIALOG:1250},f={FEEDBACK_BASE:0,FEEDBACK_REASON:20,FEEDBACK_REASON_SPACING:10,ICON_ORIGINAL:20,UNDO_OVERLAY:136,UNDO_FEEDBACK_OVERLAY:0,UNDO_FEEDBACK_CONFIRM:0},p=function(){function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};i(this,t),this.onAction=this.onAction.bind(this),this.hideVoteDialog=this.hideVoteDialog.bind(this),this._hideUndoOverlay=this._hideUndoOverlay.bind(this),this._unregisterOnActionListeners=this._unregisterOnActionListeners.bind(this),this.voteDialogValue=null,this.options=n,this.$node=(0,l["default"])(e),this.feedbackHeading="Send feedback",this.$cardNode=this.$node.find("."+h.CARD).first(),this.$voteDialogNode=this.$node.find("."+h.VOTE_DIALOG_HEADER),this.$popoverButtonNode=this.$node.find("."+h.POPOVER_BUTTON),this.$undoWithFeedback=this.$node.find("."+h.UNDO_FEEDBACK),this.$undoWithFeedbackParent=this.$node.closest("."+h.CARD),this.$undoWithFeedbackTopParent=this.$node.closest("."+h.FEED_ITEM),this._registerOnActionListeners(),Page.onReplace(e,this._unregisterOnActionListeners)}return e(t,[{key:"showDismissWithFeedback",value:function(){o(this._getOptionsForSubmission({industry:this.options.current_industry}),this.options.not_my_industry_url),f.UNDO_FEEDBACK_OVERLAY=this.$node.outerHeight(),this._expandDismissWithFeedbackOverlay()}},{key:"hideDismissWithFeedback",value:function(){var t=this;this.$undoWithFeedbackParent.animate({opacity:0,height:0,"min-height":0},{duration:c.ANIMATION,complete:function(){t.$node.closest("."+h.FEED_ITEM).remove(),(0,l["default"])(".next-card.overlaid").length||window.location.reload()}})}},{key:"undoDismissWithFeedback",value:function(){var t=this;o(this._getOptionsForSubmission({industry:this.options.current_industry}),this.options.undo_not_my_industry_url),this.$undoWithFeedbackParent.animate({height:f.UNDO_FEEDBACK_OVERLAY,"min-height":f.UNDO_FEEDBACK_OVERLAY},{duration:c.ANIMATION,complete:function(){return t.$undoWithFeedbackParent.css({overflow:"",height:"","min-height":""})}}),this.$node.addClass(h.INVISIBLE)}},{key:"sendDismissWithFeedback",value:function(){var t=this,e=this.$node.find("."+h.FEEDBACK_FORM).find("input[name!=other]").serializeArray(),i={accepted:[],rejected:[this.options.current_industry],other:""};e.forEach(function(t){"other_feedback"===t.name?i.other=t.value.toLowerCase():i.accepted.push(t.value.toLowerCase())}),"undefined"!=typeof i.accepted&&i.accepted.length>0||(i.accepted=[""]),o(this._getOptionsForSubmission(i),this.options.update_industries_url),this.$node.find("."+h.FEEDBACK_UNDO).remove(),this.$node.find("."+h.FEEDBACK_BODY).replaceWith(""),this._updateUndoWithFeedbackDialog({heading:"Thanks for the update",message:"We\u2019ll use your updated industry to show you more relevant content."}),f.UNDO_FEEDBACK_CONFIRM=this.$node.outerHeight(),this.$undoWithFeedbackParent.animate({height:f.UNDO_FEEDBACK_CONFIRM,"min-height":f.UNDO_FEEDBACK_CONFIRM},{duration:c.ANIMATION,complete:function(){return t.$undoWithFeedbackParent.css({overflow:"hidden"})}})}},{key:"onAction",value:function(t){var e={};r["default"].get(t,"target.dataset.buttonId")&&(e.button_id=r["default"].get(t,"target.dataset.buttonId")),this._trackEvent("register_card_engagement_url",e)}},{key:"dismiss",value:function(){u.Popover.deactivate(),this._storeOriginalHeight(),this._resizeToUndoOverlayHeight(),this.$popoverButtonNode.addClass(""+h.HIDE),this._trackEvent("dismiss_card_url"),this._updateUndoDialog({heading:this.options.dismiss_title,message:this.options.dismiss_message,image:this.options.dismiss_image,action:"dismiss"}),this.$node.find("."+h.UNDO_OVERLAY).removeClass(h.HIDE)}},{key:"upvote",value:function(){this.voteDialogValue=d.UPVOTE,this._trackEvent("upvote_card_url"),this._updateVoteDialogThanks()}},{key:"downvote",value:function(){this.voteDialogValue=d.DOWNVOTE,this._trackEvent("downvote_card_url"),this._updateVoteDialogThanks()}},{key:"showFeedbackDialog",value:function(){u.Popover.deactivate(),this.hideAfterFeedback=!1,this._storeOriginalHeight(),this._expandFeedbackDialog(),this.$popoverButtonNode.addClass(""+h.HIDE)}},{key:"showFeedbackDialogFromDismiss",value:function(){this.hideAfterFeedback=!0,this.$node.find("."+h.UNDO_OVERLAY).addClass(""+h.HIDE),s["default"].refresh(),this._expandFeedbackDialog()}},{key:"showFeedbackDialogFromVote",value:function(){this.hideVoteDialog(),this.hideAfterFeedback=!1,this.voteDialogValue===d.UPVOTE?(this.feedbackHeading="What did you find useful?",this.$node.find("."+h.FEEDBACK_OPTION).addClass(""+h.HIDE),this.$node.find("."+h.FEEDBACK_OPTION_WRAPPER).addClass(""+h.HIDE),this.selectedFeedbackOption="This is useful"):(this.$node.find('input[value="This is useful"]').closest("."+h.FEEDBACK_OPTION).addClass(""+h.HIDE),this.$node.find('input[value="This isn\'t useful"]').prop("checked",!0),this.selectedFeedbackOption="This isn't useful"),this._storeOriginalHeight(),this._expandFeedbackDialog(),this.$node.find("."+h.FEEDBACK_COMMENT_BOX).focus()}},{key:"hideFeedbackDialog",value:function(){this.$node.find("."+h.FEEDBACK_OVERLAY).addClass(h.HIDE),null!==this.voteDialogValue&&(this.$node.find("."+h.FEEDBACK_OPTION).removeClass(""+h.HIDE),this.voteDialogValue===d.UPVOTE&&(this.$node.find("."+h.FEEDBACK_OPTION_WRAPPER).removeClass(""+h.HIDE),this.feedbackHeading="Send feedback"),this.voteDialogValue=null),this.selectedFeedbackOption=null,this.selectedFeedbackComment=null}},{key:"cancelFeedbackDialog",value:function(){if(this.hideAfterFeedback)return void this.hide();this.hideFeedbackDialog(),this._resizeToOriginalHeight(),this.$popoverButtonNode.removeClass(""+h.HIDE)}},{key:"hideVoteDialog",value:function(){this.$voteDialogNode.animate({opacity:0,height:0,"min-height":0},{duration:c.ANIMATIONS})}},{key:"undo",value:function(){"dismiss"===this.undoAction&&(this._trackEvent("undo_dismiss_card_url"),this._hideUndoOverlay())}},{key:"submitFeedback",value:function(){var t=null===this.voteDialogValue?this.options.submit_feedback_url:this.options.card_vote_feedback_url;if(o({handle:this.options.handle,analytics_group:this.options.analytics_group,feedback:this.selectedFeedbackOption,comment:this.selectedFeedbackComment},t),this.hideAfterFeedback)return void this.hide();this.hideFeedbackDialog(),this._resizeToUndoOverlayHeight(),this._updateUndoDialog({heading:"Thanks for your feedback",message:"It will be used to improve your home feed.",action:null}),this.$node.find("."+h.UNDO_OVERLAY).removeClass(h.HIDE),setTimeout(this._hideUndoOverlay,c.HIDE_CARD)}},{key:"isFeedbackSelected",value:function(){return this.selectedFeedbackOption||this.selectedFeedbackComment}},{key:"hide",value:function(){var t=this;this.$node.animate({opacity:0,height:0,"min-height":0},{duration:c.ANIMATION,complete:function(){t.$node.remove(),(0,l["default"])(".next-card.overlaid").length||window.location.reload()}})}},{key:"_expandDismissWithFeedbackOverlay",value:function(){var t=this.$undoWithFeedback.outerHeight();this.$undoWithFeedback.removeClass(h.INVISIBLE),this.$cardNode.closest("."+h.CARD).animate({height:t,"min-height":t},{duration:c.ANIMATION})}},{key:"_getOptionsForSubmission",value:function(t){return Object.assign({handle:this.options.handle,analytics_group:this.options.analytics_group},t)}},{key:"_expandFeedbackDialog",value:function(){var t=this;this.$node.find("."+h.FEEDBACK_OVERLAY).removeClass(h.HIDE),this.$node.find('input[type="radio"].feedback-reason').first().focus();var e=this._feedbackHeight();this.$cardNode.animate({height:e,"min-height":e},{duration:c.ANIMATION,complete:function(){return t.$cardNode.css({overflow:"hidden"})}})}},{key:"_hideUndoOverlay",value:function(){this._resizeToOriginalHeight(),this.$popoverButtonNode.removeClass(""+h.HIDE),this.$node.find("."+h.UNDO_OVERLAY).addClass(""+h.HIDE),s["default"].refresh()}},{key:"_updateVoteDialogThanks",value:function(){var t=this.voteDialogValue===d.UPVOTE?h.VOTE_DIALOG_UPVOTE_THANKS:h.VOTE_DIALOG_DOWNVOTE_THANKS;this.$voteDialogNode.find("."+h.VOTE_DIALOG_SURVEY).addClass(""+h.HIDE),this.$voteDialogNode.find("."+t).removeClass(""+h.HIDE)}},{key:"_updateUndoDialog",value:function(t){this.undoHeading=t.heading,this.undoMessage=t.message,this.undoImage=t.image,this.undoAction=t.action}},{key:"_updateUndoWithFeedbackDialog",value:function(t){this.undoHeading=t.heading,this.undoMessage=t.message,this.undoByline=t.byline,this.undoImage=t.image}},{key:"_trackEvent",value:function(t,e){var i=this.options[t];o(r["default"].merge(r["default"].pick(this.options,["handle","analytics_group"]),e),i)}},{key:"_feedbackHeight",value:function(){return f.FEEDBACK_BASE=this.$node.find("."+h.FEEDBACK_OVERLAY).outerHeight(),f.FEEDBACK_BASE}},{key:"_storeOriginalHeight",value:function(){this.originalHeight=this.$cardNode.height()}},{key:"_resizeToOriginalHeight",value:function(){var t=this;this.$cardNode.animate({height:this.originalHeight,"min-height":this.originalHeight},{duration:c.ANIMATION,complete:function(){return t.$cardNode.css({overflow:"",height:"","min-height":""})}})}},{key:"_resizeToUndoOverlayHeight",value:function(){var t=this;this.$cardNode.animate({height:f.UNDO_OVERLAY,"min-height":f.UNDO_OVERLAY},{duration:c.ANIMATION,complete:function(){return t.$cardNode.css({overflow:"hidden"})}})}},{key:"_registerOnActionListeners",value:function(){var t=["a","input[type=submit]","button:not(."+h.FEEDBACK_OVERLAY+" button","."+h.UNDO_OVERLAY+" button","."+h.FEEDBACK_MENU+" button","."+h.DROPDOWN_BUTTON+")"];this.$cardNode.on("click",t.join(", "),this.onAction)}},{key:"_unregisterOnActionListeners",value:function(){this.$cardNode.off("click",this.onAction)}}]),t}();a["default"]=p,Shopify.HomeCard=null!=a["default"]?a["default"]:a})),k=(t(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(D),r=function(t){function e(t,n){i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return a.$node.find('.btn[href="#"]').on("click",function(t){return t.preventDefault(),a.hide()}),a}return a(e,t),e}(s["default"]);e["default"]=r,Shopify.CustomFeedCard=null!=e["default"]?e["default"]:e}),t(function(t,a){"use strict";function o(){var t=(0,k["default"])(window).scrollTop(),e=(0,k["default"])(".page").hasClass("page--sidebar-is-visible");if(window.innerWidth<1066&&e){(0,k["default"])(".home-greeting").css("margin-top","-="+t+"px");var i=(0,k["default"])(".home-greeting").height()-t;(0,k["default"])(".page__content").css("margin-top",i+"px"),(0,k["default"])(window).scrollTop(0)}else{var n=(0,k["default"])(".home-greeting").css("margin-top").replace(/[^-\d.]/g,"");(0,k["default"])(window).scrollTop(-1*n),(0,k["default"])(".home-greeting, .page__content").css("margin-top","")}}function s(){var t=(0,k["default"])(".nav-toggle button"),e=(0,k["default"])(".page-home-index")[0];t.on("click",function(){(0,k["default"])(".page--sidebar-is-visible").length&&window.Shopify.Home.toggleSidebar()}),Page.onReplace(e,function(){return t.off("click")}),Page.onReplace(e,r)}function r(){(0,k["default"])(window).off("resize.calcSidebar")}function l(){(0,k["default"])("."+I+" a[tg-remote='delete']").one("click",d)}function d(t){var e=t.currentTarget,i=(0,k["default"])(e).closest("."+I),n=(0,k["default"])(e).closest("."+N),a=void 0;a=n.children().length<=2?n:i,a.slideUp(150,function(){i.next().is("HR")&&i.next().remove(),i.remove(),0===n.children().length&&n.remove(),S["default"].stop()})}function c(t){(0,k["default"])(t.target).closest(".next-card").css("z-index",C)}function f(t){(0,k["default"])(t.target).closest(".next-card").css("z-index","")}function p(){var t=(0,k["default"])(".ui-feed");t.on(u.Popover.EVENTS.ACTIVATING,".ui-popover",c),t.on(u.Popover.EVENTS.DEACTIVATED,".ui-popover",f),Page.onReplace(t[0],function(){t.off(u.Popover.EVENTS.ACTIVATING),t.off(u.Popover.EVENTS.DEACTIVATED)})}function m(t){var e=/\/admin/g;return t.host===window.location.host&&e.test(t.href)}function v(t){return"javascript:"!==t.protocol&&"mailto:"!==t.protocol&&"tel:"!==t.protocol}function y(){(0,k["default"])(".page-home-index .page__content a").each(function(t,e){var i=!m(e),n=v(e);if(i&&n||D(e)){var a=(0,k["default"])(e);a.attr("target","_blank"),a.addClass("external-link");var o=a.attr("href");a.attr("href",E(o))}})}function g(t){return-1!==t.indexOf("?")}function E(t){var e=t,i="";-1!==e.indexOf("#")&&(i=e.slice(e.indexOf("#")),e=e.slice(0,e.indexOf("#")));var n=g(e);return O(e)||(e=T(e,"utm_source","Shopify",!n),e=T(e,"utm_medium","AdminHomefeed"),e=T(e,"utm_campaign","Homecards")),""+e+i}function T(t,e,i){var n=arguments.length>3&&arguments[3]!==undefined&&arguments[3];return-1!==t.indexOf(e)?t:t+(n?"?":"&")+e+"="+i}function O(t){return g(t)&&-1!==t.indexOf("hmac=")}function D(t){var e=!0,i=!1,n=undefined;try{for(var a,o=A[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var s=a.value;if(-1!==t.href.indexOf(s))return!0}}catch(t){i=!0,n=t}finally{try{!e&&o["return"]&&o["return"]()}finally{if(i)throw n}}return!1}Object.defineProperty(a,"__esModule",{value:!0});var k=n($),b=n(_),S=n(h),N="next-card__section",I="notification",C=2,A=["/admin/experts/redirect"],P=function(){function t(e){i(this,t),this.cardConsumption=new Shopify.CardConsumption({requestId:e}),l(),s()}return e(t,[{key:"onFeedLoaded",value:function(){y(),p(),this.cardConsumption.watch()}}],[{key:"toggleSidebar",value:function(t){(0,k["default"])(".page").toggleClass("page--sidebar-is-visible"),o(),void 0===t?r():(0,k["default"])(window).on("resize.calcSidebar",b["default"].throttle(o,200))}}]),t}();a["default"]=P,Shopify.Home=null!=a["default"]?a["default"]:a}),t(function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a={PREVIEW_EDITOR:"js-home-preview-editor",PARENT_ITEM:"js-home-item",HIDE:"hide"},o=function(){function t(e){i(this,t),this.$previewEditorNode=$(e).closest("."+a.PARENT_ITEM).find("."+a.PREVIEW_EDITOR)}return e(t,[{key:"showPreviewEditor",value:function(){u.Popover.deactivate(),this.$previewEditorNode.removeClass(a.HIDE)}},{key:"hidePreviewEditor",value:function(){this.$previewEditorNode.addClass(a.HIDE)}}]),t}();n["default"]=o,Shopify.HomePreviewEditor=null!=n["default"]?n["default"]:n}),t(function(t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=n($),l=n(D),u="feedback-search__input",h="feedback-search__results",d="feedback-search_item",c="ui-action-list__item",f="hide",p=function(t){function n(t,e){i(this,n);var a=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e));return a.feedbackList=e.feedback_helper_values,a.currentCategory=e.current_industry,a._updateUndoWithFeedbackDialog({heading:"Thanks for letting us know",message:"You will stop receiving information about the "+a.currentCategory+" industry.",byline:"Here are some other industries that may be a better match."}),a}return a(n,t),e(n,[{key:"textInputHandler",value:function(t){var e=this,i=this.autoComplete(t.value,this.feedbackList.complete_list),n=document.createDocumentFragment();i.forEach(function(t){var i=document.createElement("li");i.classList.add(d,c),i.setAttribute("role","option"),i.innerHTML='<button class="ui-action-list-action" type="button" name="button">\n                        <span class="ui-action-list-action__text">\n                          '+t+"\n                        </span>\n                      </button>",i.addEventListener("mousedown",e._autoCompleteAction,!1),n.appendChild(i)}),i.length&&this.sanitize?((0,r["default"])("."+h).removeClass(f),(0,r["default"])(t).next("."+h).html(n)):(0,r["default"])("."+h).addClass(f)}},{key:"inputFocusHandler",value:function(t){this.validInputEvent=!(document.activeElement===t&&t.value),this.validInputEvent?(0,r["default"])("."+h).addClass(f):(0,r["default"])("."+h).removeClass(f)}},{key:"checkboxHandler",value:function(t){t.checked?(this._autoCompleteDisabled(!1),(0,r["default"])("."+u).focus()):this._autoCompleteDisabled(!0)}},{key:"autoComplete",value:function(t,e){var i=this;return this._buildInputRegex(t),e.filter(function(t){return!!t.match(i.reg)&&t})}},{key:"_buildInputRegex",value:function(t){this.sanitize=/^[\w\s]+$/.test(t),this.sanitize&&(this.reg=new RegExp(t.split("").join("\\w*\\s*\\w*"),"i"))}},{key:"_autoCompleteDisabled",value:function(t){(0,r["default"])("."+u).attr("disabled",this.autoCompleteDisabled=t),(0,r["default"])("."+u).val("")}},{key:"_autoCompleteAction",value:function(){(0,r["default"])("."+u).val(this.textContent.trim())}}]),n}(l["default"]);s["default"]=p,Shopify.IndustryBenchmarkCardFeedback=null!=s["default"]?s["default"]:s}),t(function(t,a){"use strict";function o(t,e){return t.attr(e,"true"===t.attr(e)?"false":"true")}Object.defineProperty(a,"__esModule",{value:!0});var s=n($),r="notification-dismissal",l="[data-endpoint]",u=3,h=function(){function t(e,n){i(this,t),this.logNotification=this.logNotification.bind(this),this.options=n,this.$node=(0,s["default"])(e),this.$dismiss=(0,s["default"])(e).find("."+r),this._createLogNotificationListeners()}return e(t,[{key:"removeNotificationDismiss",value:function(){this.$node.remove()}},{key:"toggleNotificationDismissOverlay",value:function(){var t=this._calculateDismissHeight();this.$node.css("height",t),o(this.$dismiss,"aria-hidden")}},{key:"logNotification",value:function(t){var e=this.options,i=e.handle,n=e.analytics_group,a=e.data,o=(0,s["default"])(t.target),r=o.data("endpoint");s["default"].ajax({url:r,type:"POST",data:{handle:i,analytics_group:n,data:a}})}},{key:"_calculateDismissHeight",value:function(){return this.$dismiss.outerHeight()+u}},{key:"_createLogNotificationListeners",value:function(){this.$node.find(""+l).on("click",this.logNotification)}}]),t}();a["default"]=h,Shopify.Notification=null!=a["default"]?a["default"]:a})),b=(t(function(t,e){"use strict";function i(t,e){var i=m.isKnownBrowser()&&!m.isMobile()&&(m.isMac()||m.isWindows()),n=l(e.options.message);i&&(a(r(),h.D_LOWER_CASE,e),$(t).html(n))}function a(t,e,i){return p["default"].bindCombo([t,e],function(){return o(i)})}function o(t){t.hide(),t.onAction()}function r(){return m.isMac()?h.COMMAND:h.CONTROL}function l(t){var e=m.isMac()?"\u2318":"Ctrl";return t.replace("Ctrl",u(e)).replace("D",u("D"))}function u(t){return'<kbd class="keyboard-key s-none">'+t+"</kbd>"}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i;var h=s(d),p=n(c),m=s(f);Shopify.BookmarkShortcut=null!=e["default"]?e["default"]:e}),t(function(t,s){"use strict";function r(){(0,l["default"])(d).each(function(t,e){return(0,l["default"])(e).find("input")[0].checked?((0,l["default"])(e).find(c).removeClass("hide"),(0,l["default"])(e).find(f).addClass("hide")):((0,l["default"])(e).find(f).removeClass("hide"),(0,l["default"])(e).find(c).addClass("hide"))})}Object.defineProperty(s,"__esModule",{value:!0}),s.toggleImage=r;var l=n($),h=n(D),d=".platform-feedback__input-container",c=".platform-feedback__image--select-state",f=".platform-feedback__image--null-state",p=function(t){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),e(n,[{key:"submitResult",value:function(t){var e=JSON.parse(t);return"error"in e?u.Flash.error(e.error):(u.Flash.notice("Thanks for your feedback!"),this.hide())}}]),n}(h["default"]);s["default"]=p,Shopify.QuestionCard=null!=s["default"]?s["default"]:s}),t(function(t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var l=n(Twine),u=n(k),h=function(t){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),e(n,[{key:"onAction",value:function(){return r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"onAction",this).call(this),l["default"].context(document.body).uploadRequestedDocumentsModal.show()}}]),n}(u["default"]);s["default"]=h,Shopify.RequestedDocumentsNotification=null!=s["default"]?s["default"]:s}),t(function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(e){i(this,t),this.$dataList=$(e).find(".home-data-list")}return e(t,[{key:"showMore",value:function(){var t=this,e=this._truncatedHeight(),i=this._fullHeight();this.$dataList.css("max-height",e),this.$dataList.find(".home-data-list__item.hide").removeClass("hide"),$(".home-data-list__show-more, .home-data-list__show-less").toggleClass("hide"),window.setTimeout(function(){return t.$dataList.addClass("home-data-list--expanded").css("max-height",i)},0)}},{key:"showLess",value:function(){
var t=this.$dataList;t.one("transitionend",function(){t.removeClass("home-data-list__wrapper--expanded")}),t.css("max-height",this.truncatedHeight),$(".home-data-list__show-more, .home-data-list__show-less").toggleClass("hide")}},{key:"_truncatedHeight",value:function(){return this.truncatedHeight||(this.truncatedHeight=this.$dataList.height()),this.truncatedHeight}},{key:"_fullHeight",value:function(){if(!this.fullHeight){var t=1,e=this.$dataList.find("li.hide").length,i=this.$dataList.find("li").length-e-t;this.fullHeight=this.truncatedHeight+this.truncatedHeight/i*e}return this.fullHeight}}]),t}();n["default"]=a,Shopify.DataList=null!=n["default"]?n["default"]:n}),t(function(t,a){"use strict";function o(t){t.each(function(t,e){r["default"].bind(e)})}Object.defineProperty(a,"__esModule",{value:!0});var s=n($),r=n(Twine),l=5,u=function(){function t(e){i(this,t),this.timesRetried=0,this.$feedNode=(0,s["default"])(".skeleton-feed"),this.onFeedLoaded=e}return e(t,[{key:"loadHomeFeed",value:function(){var t=this;return new Promise(function(e){s["default"].ajax({type:"GET",url:"/admin/home/feed",dataType:"html",success:function(i,n,a){a.getResponseHeader("Shopify-Auth-Mechanisms")?t.retry():(t.renderFeed(i),e(i))},error:function(e){e.status>=500&&t.timesRetried<l?t.retry():Shopify.Flash.error("Error loading Home feed. Please try again later.")}})})}},{key:"renderFeed",value:function(t){this.$feedNode.hide().html(t).show(),this.$feedNode.addClass("skeleton-feed--is-loaded"),o(this.$feedNode.find(".ui-feed, .home-theme-wrapper")),this.onFeedLoaded(),(0,s["default"])(document).trigger("page:load"),window.performance&&window.performance.mark&&window.performance.mark("home_feed_rendered")}},{key:"retry",value:function(){var t=this;setTimeout(function(){t.timesRetried++,t.loadHomeFeed()},1e3*this.timesRetried)}}]),t}();a["default"]=u,Shopify.Skeleton=null!=a["default"]?a["default"]:a}),t(function(t,e){"use strict";function i(t){var e=h.nowShop().moment,i=void 0,n=void 0;switch(t){case"today":i=e.clone(),n=i;break;case"yesterday":i=e.clone().subtract(1,"day"),n=i;break;case"this_week":i=a("week"),n=o("week");break;case"this_month":i=a("month"),n=o("month");break;default:var s=t.split(","),u=l(s,2),d=u[0],c=u[1];i=r(d),n=r(c)}return{startMoment:i,endMoment:n}}function a(t){return h.nowShop().moment.clone().startOf(t)}function o(t){return h.nowShop().moment.clone().endOf(t)}function r(t){return h.fromShop((0,u["default"])(t)).moment.clone()}Object.defineProperty(e,"__esModule",{value:!0}),e.toDateRange=i,e.absoluteStartOf=a,e.absoluteEndOf=o;var u=n(moment),h=s(p);Shopify.HomeSidebarDateUtils=null!=e["default"]?e["default"]:e})),S=t(function(t,e){"use strict";function i(t){return c.withDelimiter(t)}function a(t){return c.condensed(t)}function o(t,e){return e?(100*t).toFixed(e)+"%":Math.floor(100*t)+"%"}function r(t){return d["default"].format(t,d["default"].moneyUnencodedFormat())}function l(t){var e=void 0;return t>=0?d["default"].condensed(t,d["default"].moneyUnencodedFormat()).trim():(e=Math.abs(t),"\u2212"+(e=d["default"].condensed(e,d["default"].moneyUnencodedFormat()).trim()))}function u(t){return 0!==t.indexOf("https://")&&0!==t.indexOf("http://")?t:t.substring(t.indexOf("/")+2)}function h(t){var e=f.toDateRange(t),i=e.startMoment,n=e.endMoment;return i.isSame(n)?i.format(p):i.month()===n.month()?i.format(p)+"\u2013"+n.format(_):i.format(p)+"\u2013"+n.format(p)}Object.defineProperty(e,"__esModule",{value:!0}),e.formatNumber=i,e.formatNumberCondensed=a,e.formatPercentage=o,e.formatMoney=r,e.formatMoneyCondensed=l,e.formatLink=u,e.formatDate=h;var d=n(m),c=s(v),f=s(b),p="MMM D",_="D";Shopify.HomeSidebarFormatter=null!=e["default"]?e["default"]:e}),N=t(function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=s(y),o="shopify-home",r="shopify-home-live",l=function(){function t(e,n){i(this,t),this._poll=this._poll.bind(this),this.handleData=this.handleData.bind(this),this.options=e,this.onDataReceived=n,this.pollFrequencyIndex=this.DEFAULT_POLL_FREQUENCY_INDEX,this.querySource=r,this.pollingDisabled=e.pollingDisabled}return e(t,[{key:"startPolling",value:function(){var t=this;this.querySource=o,this.timeout=window.setTimeout(function(){t._poll(),t.querySource=r},0)}},{key:"stopPolling",value:function(){this.mostRecentTotalSales=null,this.mostRecentTotalVisits=null,window.clearTimeout(this.timeout)}},{key:"handleData",value:function(t){var e=t.ast,i=t.metadata,n=t.result;if(this._validateResponse(e)){var a=n.data,o=i.recency.delay;if(a&&a[0]){var s=this._transformData(a);this._hasChanged(s)?(this.onDataReceived(s),this.pollFrequencyIndex=this.DEFAULT_POLL_FREQUENCY_INDEX):this.pollFrequencyIndex!==this.POLL_FREQUENCIES.length-1&&this._boostPollFrequency(o)}this.pollingDisabled||(this.timeout=window.setTimeout(this._poll,this.POLL_FREQUENCIES[this.pollFrequencyIndex]))}}},{key:"_poll",value:function(){return a.query(this._query(),"queries",this.querySource).then(this.handleData.bind(this))["catch"](function(){})}},{key:"_query",value:function(){throw new Error("Subclasses of PollableMetric must define a query")}},{key:"_validateResponse",value:function(t){return t.columns[0].alias.split("_").pop()===this.options.endDate}},{key:"_transformData",value:function(t){return t}},{key:"_sumColumnData",value:function(t,e){return t.reduce(function(t,i){return t+i[e]},0)}},{key:"_getHourlyData",value:function(t,e){return t.map(function(t){return t[e]})}},{key:"_isCurrent",value:function(t,e){return t<=e}},{key:"_boostPollFrequency",value:function(t){this._isCurrent(t,60)?this.pollFrequencyIndex++:this.longerPollFrequencyIndex++}},{key:"_hasChanged",value:function(t){var e=void 0,i=void 0;if(t.totalSales||0===t.totalSales){if(e=t.totalSales,null!=this.mostRecentTotalSales&&this.mostRecentTotalSales===e)return!1;this.mostRecentTotalSales=e}else{if(i=t.totalVisits,null!=this.mostRecentTotalVisits&&this.mostRecentTotalVisits===i)return!1;this.mostRecentTotalVisits=i}return!0}},{key:"_hoursInPeriod",value:function(){var t=(0,p.nowShop)().moment;if("today"===this.options.startDate||"today"===this.options.endDate)return t.hours()+1;var e=(0,p.fromShop)(this.options.startDate).moment,i=(0,p.fromShop)(this.options.endDate).moment.endOf("day");return t.isBetween(e,i)||t.isSame(e)?t.diff(e,"hours")+1:i.diff(e,"hours")+1}}]),t}();n["default"]=l,l.prototype.POLL_FREQUENCIES=[5e3,1e4,3e4,6e4],l.prototype.DEFAULT_POLL_FREQUENCY_INDEX=0,Shopify.PollableMetric=null!=n["default"]?n["default"]:n}),I=t(function(t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=n(N),l=function(t){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),e(n,[{key:"_query",value:function(){return!!this.options.hasOnlineStore&&'SHOW total_sessions AS "total_sessions_'+this.options.endDate+'" OVER hour(timestamp) AS hour FROM visits SINCE '+this.options.startDate+" UNTIL "+this.options.endDate+" ORDER BY hour ASC LIMIT "+this._hoursInPeriod()}},{key:"_transformData",value:function(t){return{totalVisits:this._sumColumnData(t,1),visits:this._getHourlyData(t,1)}}}]),n}(r["default"]);s["default"]=l,l.prototype.DEFAULT_POLL_FREQUENCY_INDEX=1,Shopify.PollableVisitsMetric=null!=s["default"]?s["default"]:s}),C=t(function(t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=n(N),l=function(t){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),e(n,[{key:"_query",value:function(){return'SHOW total_sales AS "total_sales_'+this.options.endDate+'", total_orders AS "total_orders_'+this.options.endDate+'" OVER hour(hour) AS hour FROM sales SINCE '+this.options.startDate+" UNTIL "+this.options.startDate+" ORDER BY hour ASC LIMIT "+this._hoursInPeriod()}},{key:"_transformData",value:function(t){return{totalSales:this._sumColumnData(t,1),totalOrders:this._sumColumnData(t,2),sales:this._getHourlyData(t,1),orders:this._getHourlyData(t,2)}}}]),n}(r["default"]);s["default"]=l,l.prototype.DEFAULT_POLL_FREQUENCY_INDEX=1,Shopify.PollableSalesMetric=null!=s["default"]?s["default"]:s}),A=t(function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=n(_),s=2,r=function(){function t(e,n,a,o){i(this,t),this.node=e.find("."+n+"-sparkline"),$(this.node).empty(),this.containerWidth=this.node.outerWidth(),this.containerHeight=this.node.outerHeight(),this.pathCoordinates=a.slice(0,-1),this.valueCount=this.pathCoordinates.length,this.showAnimation=o,this.interpolatedPath="",this.interpolatedPathClosing="",this.endPoint={},this._calcSparkline(),this._createSparkline(n)}return e(t,[{key:"_createSparkline",value:function(t){var e="home-sparkline";this.showAnimation&&(e+=" home-sparkline--animation"),this._buildSVGelement("svg",{viewbox:"0 0 "+this.containerWidth+" "+this.containerHeight,"class":e},this.node),this._buildSVGelement("path",{d:this.interpolatedPath+this.interpolatedPathClosing,"class":"area"},this.node.find("svg")),this._buildSVGelement("path",{d:this.interpolatedPath,"class":"line "+t+"-line","data-cat":t},this.node.find("svg")),this._buildSVGelement("circle",{cx:this.endPoint.cx,cy:this.endPoint.cy,r:this.endPoint.radius,"class":"end-point"},this.node.find("svg"))}},{key:"_buildSVGelement",value:function(t,e,i){var n=document.createElementNS("http://www.w3.org/2000/svg",t);if($(n).attr(e),$(n).hasClass("line")&&this.showAnimation){var a=n.getTotalLength();$(n).css({"stroke-dashoffset":a+"px","stroke-dasharray":a+"px"})}i.append(n)}},{key:"_calcSparkline",value:function(){for(var t=[],e=[],i=[],n=[],a=[],r=[],l=o["default"].max(this.pathCoordinates),u=o["default"].min(this.pathCoordinates),h=Math.max(l,0)+Math.abs(Math.min(u,0)),d=this.containerHeight/h,c=this.containerWidth/(this.valueCount-1),f=Math.max(l,0)*d,p=0;p<this.pathCoordinates.length;p++)t[p]=p*c,e[p]=f-this.pathCoordinates[p]*d;this._line(t[t.length-1],f),this._line(0,f),this._circle(t[t.length-1],e[e.length-1],s);for(var m=0;m<this.pathCoordinates.length-1;m++)a[m]=e[m+1]-e[m],r[m]=t[m+1]-t[m],n[m]=a[m]/r[m];i[0]=n[0],i[this.pathCoordinates.length-1]=n[this.pathCoordinates.length-2];for(var _=1;_<this.pathCoordinates.length-1;_++)0===n[_]||0===n[_-1]||n[_-1]>0!=n[_]>0?i[_]=0:(i[_]=3*(r[_-1]+r[_])/((2*r[_]+r[_-1])/n[_-1]+(r[_]+2*r[_-1])/n[_]),isFinite(i[_])||(i[_]=0));this._move(t[0],e[0]);for(var v=0;v<this.pathCoordinates.length-1;v++)this._curve(t[v]+r[v]/3,e[v]+i[v]*r[v]/3,t[v+1]-r[v]/3,e[v+1]-i[v+1]*r[v]/3,t[v+1],e[v+1])}},{key:"_curve",value:function(t,e,i,n,a,o){this.interpolatedPath+="C"+t+","+e+" "+i+","+n+" "+a+","+o+" "}},{key:"_move",value:function(t,e){this.interpolatedPath+="M"+t+","+e+" "}},{key:"_line",value:function(t,e){this.interpolatedPathClosing+="L"+t+","+e+" "}},{key:"_circle",value:function(t,e,i){this.endPoint={cx:t,cy:e,radius:i}}}]),t}();a["default"]=r,Shopify.Sparkline=null!=a["default"]?a["default"]:a}),P=t(function(t,a){"use strict";function o(t,e){return Math.floor(r(t,e))||1}function r(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return Math.max((t-e)/50,.01)}Object.defineProperty(a,"__esModule",{value:!0});var h=n(Twine),d=n($),c=s(p),f=s(S),m=n(I),_=n(C),v=n(A),y=/^[+\u2212]?[$][0-9]{1,3}(?:,?[0-9]{3})*(?:\.[0-9]{2})$/,g=/^[+\u2212]?Rs\. [0-9]{1,3}(?:,?[0-9]{3})*(?:\.[0-9]{2})$/,E=function(){function t(e,n){var a=this;i(this,t);var o=(0,d["default"])(e).closest(".page")[0];this.options=n,this.$node=(0,d["default"])(e),this.stopPolling=this.stopPolling.bind(this),this._updateData=this._updateData.bind(this),this.data={totalSales:null,totalOrders:null},this.humanized={},this.salesDataFeed=new _["default"](this.options,this._updateData),this.options.hasOnlineStore&&(this.data.totalVisits=null,this.visitsDataFeed=new m["default"](this.options,this._updateData)),this.options.inactive?u.rootDispatcher.register(this.ACTIVATE_GREETING_EVENT,this._initialize.bind(this)):this._initialize(),Page.onReplace(o,function(){a.stopPolling()})}return e(t,[{key:"startPolling",value:function(){this.resetData=!0,this.salesDataFeed.startPolling(),this.visitsDataFeed&&this.visitsDataFeed.startPolling()}},{key:"stopPolling",value:function(){this.salesDataFeed.stopPolling(),this.visitsDataFeed&&this.visitsDataFeed.stopPolling()}},{key:"_initialize",value:function(){this.startPolling()}},{key:"_updateData",value:function(t){var e=Object.keys(t);if(this.resetData)return this.resetData=!1,this.animateSparkline=!0,this._updateValues(t),this._humanizeDataAndRefresh(),void this._drawSparklines(e);var i=e[0],n=null===this.data[i],a=t[i]<this.data[i];this.animateSparkline=!1,a||n?(this._updateValues(t),this._humanizeDataAndRefresh(),this._drawSparklines(e)):this._animateUpdateAndRefresh(t)}},{key:"_animateUpdateAndRefresh",value:function(t){var e=this,i=void 0,n=void 0,a=void 0;t.totalSales&&(a=r(t.totalSales,this.data.totalSales)),t.totalVisits&&(n=o(t.totalVisits,this.data.totalVisits)),t.totalOrders&&(i=o(t.totalOrders,this.data.totalOrders));var s=0,l=function o(){s++,a&&(e.data.totalSales+=a),n&&(e.data.totalVisits+=n),i&&(e.data.totalOrders+=i),e.data.totalSales>t.totalSales||e.data.totalVisits>t.totalVisits||e.data.totalOrders>t.totalOrders||s>=50?(e._updateValues(t),e._humanizeDataAndRefresh(),e._drawSparklines(Object.keys(t))):(e._humanizeDataAndRefresh(),window.requestAnimationFrame(o))};window.requestAnimationFrame(l)}},{key:"_updateValues",value:function(t){(t.totalSales||0===t.totalSales)&&(this.data.totalSales=t.totalSales),(t.totalVisits||0===t.totalVisits)&&(this.data.totalVisits=t.totalVisits),(t.totalOrders||0===t.totalOrders)&&(this.data.totalOrders=t.totalOrders),(t.orders||0===t.orders)&&(this.data.orders=t.orders),(t.sales||0===t.sales)&&(this.data.sales=t.sales),(t.visits||0===t.visits)&&(this.data.visits=t.visits)}},{key:"_humanizeDataAndRefresh",value:function(){if(this.data.totalSales||0===this.data.totalSales){var t=f.formatMoney(this.data.totalSales);this.humanized.totalSales=this._formatCommonCurrency(t)}return(this.data.totalVisits||0===this.data.totalVisits)&&(this.humanized.totalVisits=f.formatNumber(this.data.totalVisits)),(this.data.totalOrders||0===this.data.totalOrders)&&(this.humanized.totalOrders=f.formatNumber(this.data.totalOrders)),this.takeoverActive&&this._humanizeLiveView(),this.humanized.date=c.nowShop().moment.format("MMM D"),h["default"].refresh()}},{key:"_drawSparklines",value:function(t){if(this.$node.hasClass("home-takeover-greeting")){var e=!0,i=!1,n=undefined;try{for(var a,o=t[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var s=a.value;if(["sales","orders","visits"].includes(s)){var r=0===this.$node.find("."+s+"-sparkline").children().length,l=this.animateSparkline||r;new v["default"](this.$node,s,this.data[s],l)}}}catch(t){i=!0,n=t}finally{try{!e&&o["return"]&&o["return"]()}finally{if(i)throw n}}}}},{key:"_formatCommonCurrency",value:function(t){if(y.test(t))return t.substring(0,t.indexOf("."));if(g.test(t)){var e=t.split(" "),i=l(e,2),n=i[0],a=i[1];return n+" "+a.substring(0,a.indexOf("."))}return t}}]),t}();a["default"]=E,E.prototype.ACTIVATE_GREETING_EVENT="home:greeting:activate",Shopify.TodayFeature=null!=a["default"]?a["default"]:a}),w=t(function(t,s){"use strict";function r(t){var e=t[0],i=c[e],n=t[1];return[i,p[n],t[2],t[3]]}function u(t){return t[Math.floor(Math.random()*t.length)]}Object.defineProperty(s,"__esModule",{value:!0});var h=n(N),d=9e3,c={"List of Collections":"collections list page",Collection:"collection page",Product:"product page","Blog Index":"blog index page","Blog Article":"blog article",Checkout:"checkout page",Search:"search results page",Homepage:"home page",Cart:"cart","Customer Account":"customer account","Custom Page":"custom page",Unknown:"page"},f={"collections list page":["viewed a","was just on a","looked at a"],"collection page":["viewed a","was just on a","looked at a"],"product page":["viewed a","was just on a","looked at a"],"blog index page":["viewed your","was just on a","looked at your"],"blog article":["viewed your","was just on a","looked at your"],"checkout page":["viewed the","was just on the","looked at the"],"search results page":["viewed the","was just on a","looked at a"],"home page":["viewed your","was just on your","looked at your"],cart:["viewed their","was just on their","looked at their"],"customer account":["viewed their","was just on their","looked at their"],"custom page":["viewed a","was just on a","looked at a"],page:["viewed a","was just on a","looked at a"]},p={"Game Console":"gaming console",Mobile:"phone",Tablet:"tablet",Desktop:"computer"},m=function(t){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),e(n,[{key:"pollManually",value:function(){window.setTimeout(this._poll,0)}},{key:"handleData",value:function(t){var e=t.result,i=e.data[0];if(i){var n=this._transformData(i);this.onDataReceived(n)}else window.setTimeout(this.pollManually.bind(this),d)}},{key:"_query",value:function(){return'SHOW page_type, form_factor, city, country, timestamp FROM pageviews WHERE page_type != "" AND country != "" AND city != "" AND form_factor != "" SINCE -10s UNTIL 0s ORDER BY timestamp DESC LIMIT 1'}},{key:"_transformData",value:function(t){var e=r(t),i=l(e,4),n=i[0],a=i[1],o=i[2],s=i[3],h=["Someone","A visitor","A person"],d=["from "+o+", "+s,"on their "+a];return u(h)+" "+u(d)+" "+u(f[n])+" "+n+"."}}]),n}(h["default"]);s["default"]=m,Shopify.PollableVisitorTickerMetric=null!=s["default"]?s["default"]:s}),R=t(function(t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=n(N),l=function(t){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),e(n,[{key:"pollManually",value:function(){window.setTimeout(this._poll,0)}},{key:"handleData",value:function(t){var e=t.result,i=e.data[0];if(i){var n=this._transformData(i);this.onDataReceived(n)}}},{key:"_query",value:function(){return"SHOW total_active_sessions FROM pageviews SINCE -300s UNTIL 0s"}},{key:"_transformData",value:function(t){return{totalLiveVisits:t[0]}}}]),n}(r["default"]);s["default"]=l,Shopify.PollableLiveVisitsMetric=null!=s["default"]?s["default"]:s}),M=(t(function(t,s){"use strict";function h(){return(0,p.nowShop)().moment.format("YYYY-MM-DD")===E}Object.defineProperty(s,"__esModule",{value:!0});var d=n($),c=n(Twine),f=n(P),m=n(window.SafeLocalStorage),_=n(w),v=n(R),y={FIGURE:"home-takeover-data__figure",SPARKLINE:"sparkline-wrapper",BUTTONS:"home-takeover-stats__button",ACTIVE:"home-takeover-stats__button--is-active",LIVE_VISITS:"home-takeover-live__number",VISITOR_TICKER:"home-takeover-ticker",VISITOR_TICKER_VISIBLE:"home-takeover-ticker--visible",VISITOR_TICKER_HIDING:"home-takeover-ticker--hiding",FIGURE_CAPTION_WRAPPER:"home-takeover-data__wrap",FIGURE_CAPTION_WRAPPER_NO_DATA:"home-takeover-data__wrap--no-data"},g=4,E="2017-11-28",T={ACTIVE_TAB:"takeoverActiveTab",ACTIVE_TAB_TUESDAY:"takeoverActiveTabTuesday",RANGE_TAB:"home-takeover-stats__button--range",TODAY_TAB:"home-takeover-stats__button--today"},O=3e4,D=5500,k=2100,b=function(t){function n(t,e){i(this,n);var a=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e));return a.$node=(0,d["default"])(t),a.takeoverActive=!0,a.originalStartDate=a.options.startDate,a.originalEndDate=a.options.endDate,a._getActiveTab(),a._setQueryDateRangeAndPoll(),a}return a(n,t),e(n,[{key:"tabbedView",value:function(t){this._storeTab(t),h()&&this._setDebriefGreeting(),this._reloadSkeletonContent(),this._setQueryDateRangeAndPoll()}},{key:"startPolling",value:function(){r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"startPolling",this).call(this),this.options.hasOnlineStore&&(this.pollLiveVisits=!0,this.$visitorTicker.on("transitionend",this._handleLiveSessionsTransitionEnd.bind(this)),this.$liveSessions.length&&this.liveSessionsFeed.pollManually())}},{key:"stopPolling",value:function(){r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"stopPolling",this).call(this),this.options.hasOnlineStore&&(this.pollLiveVisits=!1,this.$visitorTicker.off("transitionend"))}},{key:"_initialize",value:function(){var t=this;this.options.hasOnlineStore&&(this._initializeLiveSessions(),this._initializeVisitorTicker()),u.rootDispatcher.register(this.ACTIVATE_GREETING_EVENT,function(){t.stopPolling()}),this.startPolling()}},{key:"_initializeLiveSessions",value:function(){this.$liveSessions=(0,d["default"])("."+y.LIVE_VISITS),this.liveSessionsFeed=new v["default"]({},this._updateSessionsFeed.bind(this))}},{key:"_initializeVisitorTicker",value:function(){this.$visitorTicker=(0,d["default"])("."+y.VISITOR_TICKER),this.$visitorTicker.length&&(this.visitorTickerFeed=new _["default"]({},this._showVisitorTicker.bind(this)),this.visitorTickerFeed.pollManually())}},{key:"_handleLiveSessionsTransitionEnd",value:function(t){var e=this;"opacity"===t.originalEvent.propertyName&&(this.$visitorTicker.hasClass(y.VISITOR_TICKER_HIDING)?window.setTimeout(function(){e._resetVisitorTicker(),e.visitorTickerFeed.pollManually()},k):window.setTimeout(this._hideVisitorTicker.bind(this),D))}},{key:"_updateSessionsFeed",value:function(t){this.humanized.totalLiveVisits=t.totalLiveVisits;var e=t.totalLiveVisits.toString().length;e>6?this.$liveSessions.addClass("home-takeover-live__number--extra-small"):e>5?this.$liveSessions.addClass("home-takeover-live__number--small"):this.$liveSessions.removeClass("home-takeover-live__number--extra-small home-takeover-live__number--small"),this._refreshLiveSessions()}},{key:"_refreshLiveSessions",value:function(){var t=this;window.setTimeout(function(){t.pollLiveVisits&&t.liveSessionsFeed.pollManually()},O)}},{key:"_showVisitorTicker",value:function(t){this.$visitorTicker.text(t).addClass(y.VISITOR_TICKER_VISIBLE)}},{key:"_hideVisitorTicker",value:function(){this.$visitorTicker.addClass(y.VISITOR_TICKER_HIDING)}},{key:"_resetVisitorTicker",value:function(){var t=[y.VISITOR_TICKER_VISIBLE,y.VISITOR_TICKER_HIDING];this.$visitorTicker.removeClass(t.join(" "))}},{key:"_storeTab",value:function(t){var e=t.classList[1],i=h()?T.ACTIVE_TAB_TUESDAY:T.ACTIVE_TAB;m["default"].set(i,e),this.selectedTab=e}},{key:"_reloadSkeletonContent",value:function(){for(var t=["sales","orders","visits"],e=0;e<t.length;e++){var i=t[e],n="total"+(i[0].toUpperCase()+i.slice(1));delete this.data[i],delete this.data[n],delete this.humanized[n]}(0,d["default"])("."+y.SPARKLINE).html(""),c["default"].refresh()}},{key:"_setDebriefGreeting",value:function(){this.options.content&&(this.selectedTab===T.TODAY_TAB?(this.debriefGreetingByline=this.options.content.today.byline,this.debriefGreetingTitle=this.options.content.today.title):(this.debriefGreetingByline=this.options.content.friday_monday.byline,this.debriefGreetingTitle=this.options.content.friday_monday.title))}},{key:"_getActiveTab",value:function(){var t=h()?T.ACTIVE_TAB_TUESDAY:T.ACTIVE_TAB,e=h()?T.TODAY_TAB:T.RANGE_TAB;this.selectedTab=m["default"].get(t,e),h()&&this._setDebriefGreeting()}},{key:"_setQueryDateRangeAndPoll",value:function(){this.selectedTab===T.RANGE_TAB&&(this.options.startDate=this.originalStartDate,this.options.endDate=this.originalEndDate),this.selectedTab===T.TODAY_TAB&&(this.options.startDate="today",this.options.endDate="today"),this.stopPolling(),this.startPolling(),this._highlightCurrentTab()}},{key:"_highlightCurrentTab",value:function(){(0,d["default"])("."+y.BUTTONS).removeClass(y.ACTIVE),this.selectedTab?(0,d["default"])("."+this.selectedTab).addClass(y.ACTIVE):(0,d["default"])("."+y.BUTTONS).first().addClass(y.ACTIVE)}},{key:"_dataVolumeThreshold",value:function(){var t={belowSparklineThreshold:[],noData:[]};return Object.entries(this.data).forEach(function(e,i){var n=l(e,2),a=n[0],o=n[1];Array.isArray(o)?o.filter(function(t){return t>0}).length<=g&&t.belowSparklineThreshold.push(a):null!=o&&0===o&&t.noData.push([a,i])}),t}},{key:"_humanizeLiveView",value:function(){this.volumeThresholds=this._dataVolumeThreshold(),this._showSparklines(),this._showIconsAndLabels()}},{key:"_invalidSparklines",value:function(){return this.volumeThresholds.belowSparklineThreshold.length}},{key:"_showSparklines",value:function(){this._invalidSparklines()?(0,d["default"])("."+y.SPARKLINE).addClass("hide"):(0,d["default"])("."+y.SPARKLINE).removeClass("hide")}},{key:"_drawSparklines",value:function(t){this._invalidSparklines()||r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_drawSparklines",this).call(this,t)}},{key:"_showIconsAndLabels",value:function(){var t=this,e=this.volumeThresholds.noData;(0,d["default"])("."+y.FIGURE_CAPTION_WRAPPER).removeClass(y.FIGURE_CAPTION_WRAPPER_NO_DATA),e.forEach(function(e){var i=e[0],n=e[1];t.humanized[i]=" ",(0,d["default"])("."+y.FIGURE_CAPTION_WRAPPER).eq(n).addClass(y.FIGURE_CAPTION_WRAPPER_NO_DATA)})}}]),n}(f["default"]);s["default"]=b,Shopify.TakeOver=null!=s["default"]?s["default"]:s}),t(function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=n($),s=n(_),r=n(P),l={PAGE:"page",HOME_GREETING:"home-greeting",ORIGINAL_GREETING:"fresh-home-greeting",TAKEOVER_GREETING:"home-takeover-greeting",TAKEOVER_CONTENT:"home-takeover-greeting__wrapper",FEEDBACK:"home-theme-overlay--feedback",FEEDBACK_HEADING:"home-theme-overlay__heading",FEEDBACK_CONTENT:"home-theme-overlay__content--feedback",FEEDBACK_INPUT:"home-theme-overlay__comment",RESOLUTION:"home-theme-overlay--resolution",RESOLUTION_CONTENT:"home-theme-overlay__content--resolution",DISMISS_CONTENT:"home-theme-overlay__content--opt-out",OPT_OUT:"home-theme-overlay--opt-out",INVISIBLE:"home-theme-overlay--hidden"},h={ANIMATION:200,HIDE:3e3},d=1,c=function(){function t(e,n){i(this,t),this.$node=(0,o["default"])(e),this.$greetingParentNode=this.$node.closest("."+l.HOME_GREETING),this.options=n,this.options.tag_name="bfcm",this.feedbackGiven=!1,this.fromOptOutPage=!1,this.$takeoverGreeting=this.$node.closest("."+l.TAKEOVER_GREETING),this.$feedback=this.$node.find("."+l.FEEDBACK),this.$feedbackHeading=this.$node.find("."+l.FEEDBACK_HEADING),this.$feedbackContent=this.$node.find("."+l.FEEDBACK_CONTENT),this.$feedbackInput=this.$node.find("."+l.FEEDBACK_INPUT),this.$dismissContent=this.$node.find("."+l.DISMISS_CONTENT),this.$resolution=this.$node.find("."+l.RESOLUTION),this.$resolutionContent=this.$node.find("."+l.RESOLUTION_CONTENT),this.$optOut=this.$node.find("."+l.OPT_OUT),this._calcHeights(),(0,o["default"])(window).on("resize.calcHeights",s["default"].throttle(this._calcHeights.bind(this),200));var a=this.$node.closest("."+l.PAGE)[0];Page.onReplace(a,this._stopCalcHeights)}return e(t,[{key:"openFeedbackOverlay",value:function(t){var e=this;u.Popover.deactivate(),this.feedbackGiven=!0,this.$feedbackHeading.text(t),this.$greetingParentNode.animate({height:this.tallestOverlay,"min-height":this.tallestOverlay},{duration:h.ANIMATION,start:function(){e.$feedback.removeClass(l.INVISIBLE)}})}},{key:"sendFeedback",value:function(){var t=this.$feedbackInput.val();this.feedbackGiven=!0,this._takeOverOptOutFeedback(t),this.showResolution()}},{key:"showResolution",value:function(){var t=this;this.resolutionHeight=this.$resolutionContent.outerHeight(),this.$greetingParentNode.animate({height:this.resolutionHeight,"min-height":this.resolutionHeight},{duration:h.ANIMATION,start:function(){t.$resolution.removeClass(l.INVISIBLE),t.$optOut.addClass(l.INVISIBLE)},complete:function(){t.fromOptOutPage?t.closeTakeOver():setTimeout(function(){t.backToTakeover()},h.HIDE)}})}},{key:"backToTakeover",value:function(){var t=this;this.$greetingParentNode.animate({height:this.originalTakeOverHeight,"min-height":this.originalTakeOverHeight},{duration:h.ANIMATION,start:function(){t.$optOut.addClass(l.INVISIBLE),t.$feedback.addClass(l.INVISIBLE),setTimeout(function(){t.$resolution.addClass(l.INVISIBLE)},h.ANIMATION)},complete:function(){t._calcHeights()}})}},{key:"closeTakeOver",value:function(){var t=this;this.$greetingParentNode.animate({height:this.resolutionHeight,"min-height":this.resolutionHeight},{duration:h.ANIMATION,start:function(){t.$optOut.addClass(l.INVISIBLE),t.$feedback.addClass(l.INVISIBLE)},complete:function(){setTimeout(function(){t.$takeoverGreeting.remove()},h.HIDE)}})}},{key:"undo",value:function(){this.fromOptOutPage=!1,this._undoOptOut(),this.backToTakeover()}},{key:"gotIt",value:function(){this.feedbackGiven=!0,this.remove()}},{key:"remove",value:function(){var t=this;this.feedbackGiven?this.feedbackHeight=this.originalGreetingHeight:this.feedbackHeight=this.originalTakeOverHeight,this.$greetingParentNode.animate({height:this.feedbackHeight,"min-height":this.feedbackHeight},{duration:h.ANIMATION,start:function(){t.feedbackGiven&&(u.rootDispatcher.dispatch({type:r["default"].prototype.ACTIVATE_GREETING_EVENT}),t.$takeoverGreeting.fadeOut(h.ANIMATION,function(){t.$takeoverGreeting.remove()}))},complete:function(){t.$greetingParentNode.css({height:"","min-height":""}),t._stopCalcHeights(),t.feedbackGiven||t.undo()}})}},{key:"dismiss",value:function(){var t=this;this.fromOptOutPage=!0,u.Popover.deactivate(),this._takeOverOptOut(),this.$greetingParentNode.animate({height:this.tallestOverlay,"min-height":this.tallestOverlay},{duration:h.ANIMATION,start:function(){t.$optOut.removeClass(l.INVISIBLE)}})}},{key:"_calcHeights",value:function(){if(this._noDismissState()){this.originalGreetingHeight=(0,o["default"])("."+l.ORIGINAL_GREETING).outerHeight()+d,this.originalTakeOverHeight=(0,o["default"])("."+l.TAKEOVER_CONTENT).outerHeight()+d,this.$greetingParentNode.height(this.originalTakeOverHeight),this.$greetingParentNode.css("min-height",this.originalTakeOverHeight);var t=this.$dismissContent.outerHeight()+d,e=this.$feedbackContent.outerHeight()+d;this.tallestOverlay=Math.max(t,e)}}},{key:"_noDismissState",value:function(){return this.$optOut.hasClass(l.INVISIBLE)&&this.$feedback.hasClass(l.INVISIBLE)&&this.$resolution.hasClass(l.INVISIBLE)}},{key:"_stopCalcHeights",value:function(){(0,o["default"])(window).off("resize.calcHeights")}},{key:"_takeOverOptOut",value:function(){this._postDataToUrl(this.options.dismiss_tag_url)}},{key:"_undoOptOut",value:function(){this._postDataToUrl(this.options.undo_dismiss_tag_url)}},{key:"_takeOverOptOutFeedback",value:function(t){this.options.comment=t,this._postDataToUrl(this.options.submit_dismiss_tag_url)}},{key:"_postDataToUrl",value:function(t){var e=this.options,i=e.tag_name,n=e.comment;o["default"].ajax({url:t,type:"POST",data:{tag_name:i,comment:n}})}}]),t}();a["default"]=c,Shopify.TakeoverDismissal=null!=a["default"]?a["default"]:a}),t(function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=n($),s={PAGE:"page",OPT_OUT:"home-theme-overlay--opt-out",OPT_OUT_CONTENT:"home-theme-overlay__content--opt-out",FEEDBACK:"home-theme-overlay--feedback",FEEDBACK_CONTENT:"home-theme-overlay__content--feedback",FEEDBACK_INPUT:"home-theme-overlay__comment",RESOLUTION:"home-theme-overlay--resolution",RESOLUTION_CONTENT:"home-theme-overlay__content--resolution",HOME_THEME:"home-theme",HOME_FEED_CARD:"ui-feed__item--card",COUNTDOWN:"home-theme-countdown",COUNTDOWN_NUMBER:"number",COUNTDOWN_NUMBER_LEFT:"number__left",COUNTDOWN_NUMBER_RIGHT:"number__right",COUNTDOWN_OVER:"home-theme-wrapper--countdown-over",INVISIBLE:"home-theme-overlay--hidden",HIDE:"hide"},r={ANIMATION:200,HIDE:3e3},l=function(){function t(e,n){var a=this;i(this,t),this.$node=(0,o["default"])(e),this.$optOut=this.$node.find("."+s.OPT_OUT),this.$optOutContent=this.$node.find("."+s.OPT_OUT_CONTENT),this.$feedback=this.$node.find("."+s.FEEDBACK),this.$feedbackContent=this.$node.find("."+s.FEEDBACK_CONTENT),this.$feedbackInput=this.$node.find("."+s.FEEDBACK_INPUT),this.$resolution=this.$node.find("."+s.RESOLUTION),this.$resolutionContent=this.$node.find("."+s.RESOLUTION_CONTENT),this.$featuredCard=this.$node.find("."+s.HOME_THEME+" ."+s.HOME_FEED_CARD),this.options=n;var r=this.$optOutContent.outerHeight(),l=this.$feedbackContent.outerHeight();this.tallestOverlay=Math.max(r,l);var u=this.$node.closest("."+s.PAGE)[0],h=this.options.countdown_in_seconds;this.countdown=new Map([["days",0],["hours",0],["minutes",0],["seconds",0]]),this.countdownInterval=window.setInterval(function(){h<=0&&(a._stopInterval(),a._calcFeaturedCardMaxHeight(),setTimeout(function(){a.$node.addClass(s.COUNTDOWN_OVER)},0)),a._calcHumanizedCountdown(h),h--},1e3),window.setTimeout(function(){a.$node.find("."+s.COUNTDOWN+" ."+s.COUNTDOWN_NUMBER).css({opacity:1})},1e3),Page.onReplace(u,this._stopInterval.bind(this))}return e(t,[{key:"optOut",value:function(){var t=this;this._themeOptOut(),this.originalHeight=this.$node.outerHeight(),this.$featuredCard.addClass(s.HIDE),this.$node.animate({height:this.tallestOverlay,"min-height":this.tallestOverlay},{
duration:r.ANIMATION,start:function(){t.$optOut.removeClass(s.INVISIBLE)}})}},{key:"openFeedbackOverlay",value:function(){var t=this;this.$node.animate({height:this.tallestOverlay,"min-height":this.tallestOverlay},{duration:r.ANIMATION,start:function(){t.$feedback.removeClass(s.INVISIBLE)}})}},{key:"sendFeedback",value:function(){var t=this,e=this.$feedbackInput.val();this._themeOptOutFeedback(e),this.resolutionHeight=this.$resolutionContent.outerHeight(),this.$node.animate({height:this.resolutionHeight,"min-height":this.resolutionHeight},{duration:r.ANIMATION,start:function(){t.$resolution.removeClass(s.INVISIBLE)},complete:function(){setTimeout(function(){t.remove()},r.HIDE)}})}},{key:"undo",value:function(){var t=this;this.$featuredCard.removeClass(s.HIDE),this._undoOptOut(),this.$node.animate({height:this.originalHeight,"min-height":this.originalHeight},{duration:r.ANIMATION,start:function(){t.$optOut.addClass(s.INVISIBLE),t.$feedback.addClass(s.INVISIBLE)},complete:function(){t.$node.css({height:"","min-height":""})}})}},{key:"remove",value:function(){var t=this;this.$node.animate({opacity:0,height:0,"min-height":0},{duration:r.ANIMATION,complete:function(){t.$node.remove()}})}},{key:"_themeOptOut",value:function(){this._postDataToUrl(this.options.dismiss_tag_url)}},{key:"_undoOptOut",value:function(){this._postDataToUrl(this.options.undo_dismiss_tag_url)}},{key:"_themeOptOutFeedback",value:function(t){this.options.comment=t,this._postDataToUrl(this.options.submit_dismiss_tag_url)}},{key:"_postDataToUrl",value:function(t){var e=this.options,i=e.tag_name,n=e.comment;o["default"].ajax({url:t,type:"POST",data:{tag_name:i,comment:n}})}},{key:"_stopInterval",value:function(){window.clearInterval(this.countdownInterval)}},{key:"_calcHumanizedCountdown",value:function(t){var e=t,i=new Map([["days",86400],["hours",3600],["minutes",60],["seconds",1]]),n=!0,a=!1,o=undefined;try{for(var s,r=this.countdown.keys()[Symbol.iterator]();!(n=(s=r.next()).done);n=!0){var l=s.value,u=i.get(l),h=Math.floor(e/u),d=h>=10?h:"0"+h;this.countdown.set(l,d),e%=u}}catch(t){a=!0,o=t}finally{try{!n&&r["return"]&&r["return"]()}finally{if(a)throw o}}this._updateCountdown()}},{key:"_updateCountdown",value:function(){var t=!0,e=!1,i=undefined;try{for(var n,a=this.countdown.keys()[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var r=n.value;(0,o["default"])("."+r+" ."+s.COUNTDOWN_NUMBER_LEFT).html(String(this.countdown.get(r))[0]),(0,o["default"])("."+r+" ."+s.COUNTDOWN_NUMBER_RIGHT).html(String(this.countdown.get(r))[1])}}catch(t){e=!0,i=t}finally{try{!t&&a["return"]&&a["return"]()}finally{if(e)throw i}}}},{key:"_calcFeaturedCardMaxHeight",value:function(){var t=this.$featuredCard.outerHeight();this.$featuredCard.css("max-height",t)}}]),t}();a["default"]=l,Shopify.HomeTheme=null!=a["default"]?a["default"]:a}),t(function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=n($),s=n(window.SafeLocalStorage),r={HOLIDAYS_TOOLTIP:"holidaysTooltip",HOLIDAYS_TOOLTIP_VISIBLE:"",HOLIDAYS_TOOLTIP_HIDDEN:"hide"},l=function(){function t(e){i(this,t),this.$node=(0,o["default"])(e),this.$tooltips=(0,o["default"])(e).find(".home-card-tooltip-holidays"),this.holidayTooltipState=s["default"].get(r.HOLIDAYS_TOOLTIP,r.HOLIDAYS_TOOLTIP_VISIBLE),this.holidayTooltipState===r.HOLIDAYS_TOOLTIP_HIDDEN&&this._hideTooltip()}return e(t,[{key:"dismissTooltip",value:function(){s["default"].set(r.HOLIDAYS_TOOLTIP,r.HOLIDAYS_TOOLTIP_HIDDEN),this.holidayTooltipState=s["default"].get(r.HOLIDAYS_TOOLTIP,r.HOLIDAYS_TOOLTIP_HIDDEN),this._hideTooltip()}},{key:"_hideTooltip",value:function(){this.$tooltips.addClass("hide")}}]),t}();a["default"]=l,Shopify.HomeThemeHolidays=null!=a["default"]?a["default"]:a}),t(function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=n($),s="dismiss_show_feed_button",r=function(){function t(e,n){var a=n.requestId;i(this,t),this.cardConsumptionRequestId=a,this.$feedNode=(0,o["default"])(".skeleton-feed"),this.$node=(0,o["default"])(e)}return e(t,[{key:"dismissShowFeedButton",value:function(){this.$node.addClass("is-loading").attr("disabled",!0),this.$feedNode.removeClass("hide"),this.$node.addClass("hide");var t=new Shopify.Home(this.cardConsumptionRequestId);new Shopify.Skeleton(t.onFeedLoaded.bind(t)).loadHomeFeed(),o["default"].ajax({type:"DELETE",url:"/admin/dismissible_element?"+o["default"].param({handle:s})})}}]),t}();a["default"]=r,Shopify.FeedVisibility=null!=a["default"]?a["default"]:a}),t(function(t,a){"use strict";function o(t,e){var i=t.clone().startOf(e),n=t.clone().endOf(e),a=f;return i.month()===n.month()&&(a=m),i.format(f)+"\u2013"+n.format(a)}Object.defineProperty(a,"__esModule",{value:!0});var r=n(moment),h=n(Twine),d=s(p),c=s(g),f="MMM D",m="D",_=function(){function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"today";i(this,t),this.onDateChanged=this.onDateChanged.bind(this),this.selectedDate=n,u.rootDispatcher.register(this.constructor.DATE_CHANGED_EVENT,this.onDateChanged).bindToNode(e),this._initFormattedDates(),this._updateLabel()}return e(t,[{key:"changeDate",value:function(t){return u.rootDispatcher.dispatch({type:this.constructor.DATE_CHANGED_EVENT,data:t})}},{key:"onDateChanged",value:function(t){var e=!0,i=t.data.split(","),n=l(i,2);return n[0]===n[1]&&(e=this.selectedDate===t.data),this.selectedDate=t.data,this._updateLabel(),e&&u.Popover.deactivate(),h["default"].refresh()}},{key:"_updateLabel",value:function(){if(-1===this.selectedDate.indexOf(","))this.dateLabel=c.titleize(this.selectedDate,!0);else{var t=this.selectedDate.split(","),e=l(t,2),i=e[0],n=e[1];if(this.dateLabel=d.fromShop((0,r["default"])(i)).formatInShop(f),i===n)return;(0,r["default"])(i).month()===(0,r["default"])(n).month()?this.dateLabel+="\u2013"+d.fromShop((0,r["default"])(n)).formatInShop(m):this.dateLabel+="\u2013"+d.fromShop((0,r["default"])(n)).formatInShop(f)}}},{key:"_initFormattedDates",value:function(){var t=d.nowShop().moment;this.formatted={today:t.format(f),yesterday:t.clone().subtract(1,"days").format(f),this_week:o(t,"week"),this_month:o(t,"month")}}}]),t}();_.DATE_CHANGED_EVENT="home:sidebar:date-changed",a["default"]=_,Shopify.HomeSidebarDatepicker=null!=a["default"]?a["default"]:a})),H=t(function(t,h){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var d=n(Bugsnag),c=n(Shopify.SummaryReport),f=n(M),p=s(b),m=s(S),_="YYYY-MM-DD",v=function(t){function n(t,e){i(this,n);var a=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return a.channelId=e.channelId,a.homeSidebar=e.homeSidebar,a.widgetViewName=e.widgetViewName,a.widgetErrorMessage=e.widgetErrorMessage,a._newDateSelected=a._newDateSelected.bind(a),a._newDateSelected({data:a.homeSidebar.initialDate}),a.ready=!0,a.URL_REGEX=/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,4}\b([-a-zA-Z0-9@:%_+.~#?&\/\/=]*)/,u.rootDispatcher.register(f["default"].DATE_CHANGED_EVENT,a._newDateSelected).bindToNode(t),a}return a(n,t),e(n,[{key:"changeChannelProvider",value:function(t){var e;this.homeSidebar.setActiveChannel(t.data);for(var i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];(e=r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"changeChannelProvider",this)).call.apply(e,[this,t].concat(a))}},{key:"renderError",value:function(t){t&&t instanceof Error&&d["default"].notifyException(t),this.errorTemplate&&this.append(this.errorTemplate)}},{key:"_load",value:function(){if(this.ready&&this.homeSidebar.isActive(this.channelId)){for(var t,e=arguments.length,i=Array(e),a=0;a<e;a++)i[a]=arguments[a];(t=r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_load",this)).call.apply(t,[this].concat(i))}}},{key:"_newDateSelected",value:function(t){switch(this.homeSidebar.setActiveDate(t.data,m.formatDate(t.data)),t.data){case"today":return this.changeDateRange({data:{startDate:"0d",endDate:"0d"}});case"yesterday":return this.changeDateRange({data:{startDate:"-1d",endDate:"-1d"}});case"this_week":return this.changeDateRange({data:{startDate:p.absoluteStartOf("week").format(_),endDate:p.absoluteEndOf("week").format(_)}});case"this_month":return this.changeDateRange({data:{startDate:p.absoluteStartOf("month").format(_),endDate:p.absoluteEndOf("month").format(_)}});default:var e=t.data.split(","),i=l(e,2),n=i[0],a=i[1];return this.changeDateRange({data:{startDate:n,endDate:a}})}}}]),n}(c["default"]);h["default"]=v,Shopify.HomeSidebarReport=null!=h["default"]?h["default"]:h}),L=t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=n(H),u=s(S),h=function(t){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),e(n,[{key:"queries",value:function(){return{totalSessions:"SHOW total_sessions\n         FROM visits\n         WHERE referrer_source == 'Unknown'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,topReferrers:"SHOW total_sessions\n         BY referrer_host\n         FROM visits\n         WHERE referrer_source == 'Unknown'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_sessions DESC\n         LIMIT 5"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data")}},{key:"renderResult",value:function(t){var e=this,i=t[0].result.data[0][0],n=t[1].result.data;if(!n.length)return void this.append(this.noDataTemplate,{widgetErrorMessage:this.widgetErrorMessage});var a=n.map(function(t){return{referrerURL:function(){return null==t[0].match(e.URL_REGEX)?undefined:"http://"+u.formatLink(t[0])}(),referrerName:u.formatLink(t[0]),referrerCount:u.formatNumberCondensed(t[1]),percentage:u.formatPercentage(t[1]/i)}}),o=a.filter(function(t){return"0%"!==t.percentage});this.append(this.resultTemplate,{referrers:o})}}]),n}(l["default"]);r["default"]=h,Shopify.HomeTopReferrersReport=null!=r["default"]?r["default"]:r}),F=(t(function(t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=n(L),l=function(t){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),e(n,[{key:"queries",value:function(){return{totalEmbeds:"SHOW total_visitors\n         FROM buy_button_impression\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,topEmbeds:"SHOW total_visitors BY embedded_path\n         FROM buy_button_impression\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_visitors DESC\n         LIMIT 3"}}}]),n}(r["default"]);s["default"]=l,Shopify.HomeBuyButtonTopEmbedLinksReport=null!=s["default"]?s["default"]:s}),t(function(t,r){"use strict";function l(t,e){var i="sales"===e?"order":"view";return h.formatNumberCondensed(t)+" "+d.pluralize(t,i)}Object.defineProperty(r,"__esModule",{value:!0});var u=n(H),h=s(S),d=s(g),c=function(t){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),e(n,[{key:"queries",value:function(){return{topProducts:"SHOW gross_sales, total_quantity\n         BY product_id, product_title, variant_title\n         FROM sales\n         "+this.queryProps.channelFilter+" "+(this.queryProps.channelFilter?"AND":"WHERE")+" sale_line_type == 'product'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_quantity DESC\n         LIMIT 3"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(t){var e=this,i=t[0].result.data;if(!i.length)return void this.append(this.noDataTemplate,{widgetErrorMessage:this.widgetErrorMessage});var n=i.map(function(t,n){return{id:t[0],name:t[1],variant:"Default Title"===t[2]?null:t[2],sales:h.formatMoney(t[3]),metric:l(t[4],e.widgetViewName),isLastEntry:n===i.length-1}});this.append(this.resultTemplate,{products:n})}}]),n}(u["default"]);r["default"]=c,Shopify.HomeTopProductsReport=null!=r["default"]?r["default"]:r})),V=t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=n($),u=n(F),h=s(S),d=s(E),c=function(t){function n(t,e){i(this,n);var a=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e));return a.channelId=e.channelId,a.channelName=e.channelName,a.homeSidebar=e.homeSidebar,a.widgetViewName=e.widgetViewName,a.queryProps.channelName=a.channelName,a}return a(n,t),e(n,[{key:"queries",value:function(){return{topProducts:"SHOW total_views BY product_id\n         FROM daily_channel_product_listing_engagements\n         WHERE api_client_title == '"+this.queryProps.channelName+"'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_views DESC\n         LIMIT 3"}}},{key:"renderResult",value:function(t){var e=this,i=t[0].result.data;if(!i.length)return void this.append(this.noDataTemplate,{widgetErrorMessage:this.widgetErrorMessage});var n=i.map(function(t){return t[0]});this._loadProductTitles(n).then(function(t){return i.map(function(e,n){return{id:e[0],views:h.formatNumberCondensed(e[1]),name:t[e[0]],isLastEntry:n===i.length-1}})}).then(function(t){return e.append(e.resultTemplate,{products:t})}).fail(this.renderError.bind(this))}},{key:"_loadProductTitles",value:function(t){return l["default"].ajax({url:d.products().json+"?ids="+t.join(",")+"&fields=id,title",type:"GET",dataType:"json"}).then(function(t){var e={};return t.products.forEach(function(t){e[t.id]=t.title}),e})}}]),n}(u["default"]);r["default"]=c,Shopify.HomeTopViewedProductsReport=null!=r["default"]?r["default"]:r}),x=(t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=n(V),u=s(S),h=function(t){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),e(n,[{key:"queries",value:function(){return{topProducts:"SHOW total_visitors BY product_id\n         FROM buy_button_impression\n         WHERE product_id != 0\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_visitors DESC\n         LIMIT 3"}}},{key:"renderResult",value:function(t){var e=this,i=t[0].result.data;if(!i.length)return void this.append(this.noDataTemplate,{widgetErrorMessage:this.widgetErrorMessage});var n=i.map(function(t){return t[0]});this._loadProductTitles(n).then(function(t){return i.map(function(e,n){return{id:e[0],views:u.formatNumberCondensed(e[1]),name:t[e[0]],isLastEntry:n===i.length-1}})}).then(function(t){return e.append(e.resultTemplate,{products:t})}).fail(this.renderError.bind(this))}}]),n}(l["default"]);r["default"]=h,Shopify.HomeBuyButtonTopViewedProductsReport=null!=r["default"]?r["default"]:r}),t(function(t,e){"use strict";function i(t,e){var i=Math.abs(e-t);if(t<0){i*=1+1/O.yAxisTickCount}var n=i/(O.yAxisTickCount-1);n=o(n,r(n)/2,i);var a=Math.ceil(Math.abs(t)/n);return(0,g["default"])({from:0,to:O.yAxisTickCount,inclusive:!1}).map(function(t,e){return(e-a)*n}).reverse()}function a(t,e){return t.map(function(t,i){return{value:e(t),visible:i%2==0}})}function o(t,e,i){var n=Math.floor(i);if(n<=O.yAxisRange.small)return O.yAxisStepInterval.small;if(n<=O.yAxisRange.medium)return O.yAxisStepInterval.medium;var a=Math.ceil(t),o=a%e,s=Math.round(a+e-o);return Math.max(s,O.yAxisStepInterval.large)}function r(t){return Math.pow(10,Math.ceil(t).toString().length-1)}function u(t){function e(t,e){var i=l(e,2),n=(i[0],i[1]);return Math.min(t,n)}return Math.min(0,t.reduce(e,0))}function h(t){function e(t,e){var i=l(e,2),n=(i[0],i[1]);return Math.max(t,n)}return Math.max(0,t.reduce(e,0))}function d(t){var e="hour"===t.columns[0].field,i=D.day;return e&&(i+=" "+D.hour),{tooltipDateFormat:i,xAxisDateFormat:e?D.hour:D.dayCondensed}}function c(t){return t>O.removeSpacingBreakpoint?0:t>O.reduceSpacingBreakpoint?1:Math.max(Math.floor(O.reduceSpacingBreakpoint/t),2)}function f(t,e){var i=Math.abs(t)/e*O.height;return Math.round(Math.max(i,O.minBarHeight))}function m(t,e){var i=Math.round(100*t/e);return i=Math.max(i,O.minTooltipPositionPercent),i=Math.min(i,O.maxTooltipPositionPercent)}function v(t){var e=[0,t-1];if(t>=7)e.push(Math.floor(Number(t)/3)),e.push(Math.floor(2*t/3));else{var i=!0,n=!1,a=undefined;try{for(var o,s=(0,g["default"])({from:1,to:t-2,inclusive:!0})[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var r=o.value;e.push(r)}}catch(t){n=!0,a=t}finally{try{!i&&s["return"]&&s["return"]()}finally{if(n)throw a}}}return e}Object.defineProperty(e,"__esModule",{value:!0});var y=n(_),g=n(T),E=s(p),O={height:101,minBarHeight:2,minGraphHeight:10,minTooltipPositionPercent:10,maxTooltipPositionPercent:90,fixXAxisBreakpoint:20,reduceSpacingBreakpoint:40,removeSpacingBreakpoint:90,yAxisTickCount:6,yAxisNoDataStepHeight:1,yAxisLowDataStepHeight:2,yAxisStepInterval:{small:1,medium:2,large:5},yAxisRange:{small:5,medium:10}},D={day:"MMMM D, YYYY",dayCondensed:"MMM D",hour:"ha"};e["default"]=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},e=void 0;if(!(e=t.dataFormatters))throw new Error("HomeGraphHelper requires dataFormatters to format values and the y-axis.");return function(n){var o=n.data.length,s=O.height/(O.yAxisTickCount-1),r=i(u(n.data),h(n.data)),p=r[0],_=y["default"].last(r),g=p-_,T={type:t.type||"sales",hasManyPoints:o>O.fixXAxisBreakpoint,barSpacing:c(o),bars:[],originPosition:Math.round(r.indexOf(0)*s),xAxis:[],yAxis:a(r,e.formatYAxisValue)},D=E.nowShop().moment,k=d(n),b=k.tooltipDateFormat,S=k.xAxisDateFormat;return n.data.forEach(function(t,i){var n=l(t,3),a=n[0],s=n[1],r=n[2],u=void 0,h=void 0,d=E.fromShop(a).moment.isAfter(D);return d||(h={date:E.fromShop(a).moment.format(b),horizontalPosition:m(i,o),primaryValue:e.formatPrimaryValue(s)},e.formatSecondaryValue&&(h.secondaryValue=e.formatSecondaryValue(r))),T.bars.push({rawValue:s,height:f(s,g),tooltip:h,inFuture:d}),v(o).includes(i)&&(u=E.fromShop(a).moment.format(S)),T.xAxis.push(u||"")}),T}},Shopify.HomeGraphTransformer=null!=e["default"]?e["default"]:e})),B=(t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=n(H),u=n(x),h=s(S),d=s(g),c=function(t){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),e(n,[{key:"queries",value:function(){var t=this.queryProps.startDate===this.queryProps.endDate,e=t?"hour":"day";return{visits:"SHOW total_sessions, total_visitors\n         OVER "+e+"(viewed_at)\n         AS "+e+"\n         FROM buy_button_impression\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY "+e+" ASC",totalVisits:"SHOW total_sessions\n         FROM buy_button_impression\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,totalVisitors:"SHOW total_visitors\n         FROM buy_button_impression\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate}}},{key:"initializeView",value:function(){var t={formatPrimaryValue:function(t){return h.formatNumber(t)+" "+d.pluralize(t,"visit")},formatSecondaryValue:function(t){return h.formatNumber(t)+" visitors"},formatYAxisValue:function(t){return h.formatNumberCondensed(t)}};this.transformGraphData=(0,u["default"])({type:"visits",dataFormatters:t}),this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(t){var e=t[1].result.data,i=t[2].result.data;i?this.append(this.resultTemplate,{visits:h.formatNumber(e),visitors:h.formatNumber(i),graph:this.transformGraphData(t[0].result)}):this.append(this.noDataTemplate)}}]),n}(l["default"]);r["default"]=c,Shopify.HomeBuyButtonVisitorsReport=null!=r["default"]?r["default"]:r}),t(function(t,r){"use strict";function h(t){t.stopPropagation()}Object.defineProperty(r,"__esModule",{value:!0});var d=n(Twine),c=n(_),f=n($),p=n(H),m=n(Shopify.SummaryReportChannelpicker),v=s(S),y=s(g),E="129785",T=function(t){function n(t,e){i(this,n);var a=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e));return a.channels=e.channels.filter(function(t){return"all"!==t.id}),a}return a(n,t),e(n,[{key:"queries",value:function(){var t=this,e={};return this.channels.forEach(function(i){return e[i.name+"-"+i.id]=t._salesAndOrdersQuery(i.id),e[i.name+"-"+i.id]}),e}},{key:"initializeView",value:function(){(0,f["default"])(".page__sidebar").on("click",".home-channel-summary__link",h),this.resultTemplate=this.createTemplate(".js-template-success"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(t){var e={};this.channels.forEach(function(i,n){var a=l(t[n].result.data[0],2),o=a[0],s=a[1];i.id[0]===E&&(i.name=i.name.replace(/Point of sale/,"Shopify POS")),e[i.name+"-"+i.id]=c["default"].assign(i,{sales:""+v.formatMoney(o),orders:v.formatNumberCondensed(s)+" "+y.pluralize(s,"order")})});var i=this.append(this.resultTemplate,{formattedDate:this.homeSidebar.formattedDate,channels:e});d["default"].bind(i.find(".js-button-wrapper")[0])}},{key:"changeChannel",value:function(t){u.rootDispatcher.dispatch({type:m["default"].CHANNEL_CHANGED_EVENT,data:t})}},{key:"_salesAndOrdersQuery",value:function(t){var e="";if("other"===t)e="WHERE channel_provider_id == 0";else{var i=t.split("-"),n=l(i,2),a=n[0],o=n[1];e="WHERE api_client_id == "+a,o&&(e+=" AND location_id == "+o)}return'\n       SHOW\n         total_sales AS "sales '+t+'",\n         total_orders AS "orders '+t+'"\n       FROM sales\n       '+e+"\n       SINCE "+this.queryProps.startDate+"\n       UNTIL "+this.queryProps.endDate}}]),n}(p["default"]);r["default"]=T,Shopify.HomeChannelsSummaryReport=null!=r["default"]?r["default"]:r}),t(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(H),r=function(t){function e(t,n){i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return a.channelId=n.channelId,a.channelName=n.channelName,a.homeSidebar=n.homeSidebar,a.queryProps.channelName=a.channelName,a}return a(e,t),e}(s["default"]);e["default"]=r,Shopify.HomeSidebarEngagementsReport=null!=e["default"]?e["default"]:e})),j=t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var u=n(B),h=s(S),d=function(t){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),e(n,[{key:"queries",value:function(){return{views:'SHOW total_views, total_clicks\n         FROM daily_channel_product_listing_engagements\n         WHERE api_client_title == "'+this.queryProps.channelName+'"\n         SINCE '+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,totalPurchased:'SHOW total_orders\n         FROM sales\n         WHERE api_client_title == "'+this.queryProps.channelName+'"\n         SINCE '+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(t){var e=l(t[0].result.data[0],2),i=e[0],n=e[1],a=t[1].result.data[0][0];if(0===i)return void this.append(this.noDataTemplate);var o={reachedCheckout:n.toLocaleString(),reachedCheckoutPercentage:h.formatPercentage(n/i,2),purchased:a.toLocaleString(),purchasedPercentage:h.formatPercentage(a/i,2)};this.append(this.resultTemplate,o)}}]),n}(u["default"]);r["default"]=d,Shopify.HomeConversionReport=null!=r["default"]?r["default"]:r}),U=(t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=n(H),u=s(S),h=function(t){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),e(n,[{key:"queries",value:function(){return{totalMarketingCampaigns:"SHOW total_sessions\n         FROM visits\n         WHERE utm_campaign_name != ''\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,topMarketingCampaigns:"SHOW total_sessions\n         BY utm_campaign_name\n         FROM visits\n         WHERE utm_campaign_name != ''\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_sessions DESC\n         LIMIT 5"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data")}},{key:"renderResult",value:function(t){var e=t[0].result.data[0][0],i=t[1].result.data;if(!i.length)return void this.append(this.noDataTemplate,{widgetErrorMessage:this.widgetErrorMessage});var n=i.map(function(t){return{referrerName:t[0],referrerCount:u.formatNumberCondensed(t[1]),percentage:u.formatPercentage(t[1]/e)}});this.append(this.resultTemplate,{referrers:n})}}]),n}(l["default"]);r["default"]=h,Shopify.HomeMarketingCampaignsReport=null!=r["default"]?r["default"]:r}),t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var u=n(j),h=s(S),d=function(t){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),e(n,[{key:"queries",value:function(){return{sessionsFunnel:"SHOW total_sessions, total_carts, total_reached_checkouts\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,totalPurchased:"SHOW total_orders\n         FROM sales\n         WHERE api_client_title == 'Online Store'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate}}},{key:"renderResult",value:function(t){var e=l(t[0].result.data[0],3),i=e[0],n=e[1],a=e[2],o=t[1].result.data[0][0];if(0===i)return void this.append(this.noDataTemplate);var s={addsToCart:n.toLocaleString(),addsToCartPercentage:h.formatPercentage(n/i,2),reachedCheckout:a.toLocaleString(),reachedCheckoutPercentage:h.formatPercentage(a/i,2),purchased:o.toLocaleString(),purchasedPercentage:h.formatPercentage(o/i,2)};this.append(this.resultTemplate,s)}}]),n}(u["default"]);r["default"]=d,Shopify.HomeOnlineStoreConversionReport=null!=r["default"]?r["default"]:r}),t(function(t,a){"use strict";function o(){return h["default"].get(p,c)}Object.defineProperty(a,"__esModule",{value:!0});var s=n($),r=n(Twine),l=n(Shopify.SummaryReportChannelpicker),h=n(window.SafeLocalStorage),d="today",c="all",f="homeSidebarDate",p="homeSidebarChannel",m="cid",_=function(){function t(e,n,a){i(this,t),this._updateChannelPicker=this._updateChannelPicker.bind(this),this._initialShowEvent=this._initialShowEvent.bind(this),this._showPickers=this._showPickers.bind(this),this.setActiveChannel=this.setActiveChannel.bind(this),this.node=e,this.showOther=a.showOther;var o=n.map(function(t){return t.id});this.currentChannelId=this._getInitialChannelId(o),this.initialDate=h["default"].get(f,d),u.rootDispatcher.register(l["default"].AFTER_CHANNEL_CHANGED_EVENT,this._initialShowEvent),setTimeout(this._updateChannelPicker,0)}return e(t,[{key:"setActiveDate",value:function(t,e){this.formattedDate=e,h["default"].set(f,t)}},{key:"setActiveChannel",value:function(t){this.currentChannelId=t,h["default"].set(p,this.currentChannelId)}},{key:"isActive",value:function(t){return t===this.currentChannelId}},{key:"_updateChannelPicker",value:function(){this._setChannelPickerLabel()}},{key:"_setChannelPickerLabel",value:function(){u.rootDispatcher.dispatch({type:l["default"].CHANNEL_CHANGED_EVENT,data:this.currentChannelId})}},{key:"_initialShowEvent",value:function(t){t.data===this.currentChannelId&&(r["default"].refresh(),this._showPickers(),u.rootDispatcher.remove(l["default"].CHANNEL_CHANGED_EVENT,this._initialShowEvent))}},{key:"_showPickers",value:function(){return(0,s["default"])(this.node).removeClass("next-card--home-channel-filters--loading")}},{key:"_getInitialChannelId",value:function(t){for(var e=[this._channeldIdFromUrl,o],i=0;i<e.length;i++){var n=e[i],a=n.call(this);if(-1!==t.indexOf(a))return a}return c}},{key:"_channeldIdFromUrl",value:function(){var t=this._urlParams().filter(function(t){return t.split("=")[0]===m})[0];if(t){var e=t.split("=")[1];return decodeURIComponent(e)}return null}},{key:"_urlParams",value:function(){return window.location.search.substring(1).split("&")}}]),t}();a["default"]=_,Shopify.HomeSidebar=null!=a["default"]?a["default"]:a}),t(function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=n(moment),s=n(_),r=n($),h=n(O),d=n(T),c=n(M),f="MMMM YYYY",p="e",m="YYYY-MM-DD",v=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],y=function(){function t(e,n){i(this,t),this.$calendar=(0,r["default"])(e).find(".js-home-calendar"),this._initTemplate(e),this._initEvents(e),this._loadDateRange({data:n.selectedDate})}return e(t,[{key:"nextMonth",value:function(){return this._loadMonthFor(this.lastOfMonth.add(1,"day"))}},{key:"prevMonth",value:function(){return this._loadMonthFor(this.firstOfMonth.subtract(1,"day"))}},{key:"_initTemplate",value:function(t){var e=(0,r["default"])(t).find(".js-template-calendar").remove();return this.template=s["default"].template(e.html()),this.template}},{key:"_initEvents",value:function(t){var e=this;u.rootDispatcher.register(c["default"].DATE_CHANGED_EVENT,this._loadDateRange.bind(this)).bindToNode(t),this.$calendar.on("click",".ui-button",this._dateClicked.bind(this)),h["default"].onReplace(t,function(){return e.$calendar.off("click")})}},{key:"_loadDateRange",value:function(t){var e=t.data,i=(0,o["default"])().startOf("day");switch(e){case"today":this.fromMoment=i,this.toMoment=i;break;case"yesterday":this.fromMoment=i.clone().subtract(1,"day"),this.toMoment=i.clone().subtract(1,"day");break;case"this_week":this.fromMoment=i.clone().startOf("week"),this.toMoment=i.clone().endOf("week").startOf("day");break;case"this_month":this.fromMoment=i.clone().startOf("month"),this.toMoment=i.clone().endOf("month").startOf("day");break;default:var n=e.split(","),a=l(n,2),s=a[0],r=a[1];this.fromMoment=(0,o["default"])(s),this.toMoment=(0,o["default"])(r)}return this._loadMonthFor(this.fromMoment)}},{key:"_render",value:function(t){var e={weeks:t,monthName:this.monthName,DAYS_OF_THE_WEEK:v};return this.$calendar.empty(),this.$calendar.append(this.template(e))}},{key:"_dateClicked",value:function(t){t.stopPropagation();var e=t.target.innerHTML.trim(),i=(0,o["default"])(new Date(this.firstOfMonth.year(),this.firstOfMonth.month(),e));return this.toMoment.isSame(this.fromMoment)&&i.isSame(this.toMoment)?this._updateDatepicker():this.toMoment.isSame(this.fromMoment)&&i.isAfter(this.fromMoment)?(this.toMoment=i,this._updateDatepicker()):(this.fromMoment=i,this.toMoment=i,this._updateDatepicker())}},{key:"_updateDatepicker",value:function(){var t=this.fromMoment.format(m)+",";return t+=""+this.toMoment.format(m),u.rootDispatcher.dispatch({type:c["default"].DATE_CHANGED_EVENT,data:t})}},{key:"_loadMonthFor",value:function(t){var e=[],i={},n=0;this.firstOfMonth=t.clone().startOf("month"),this.lastOfMonth=t.clone().endOf("month");var a=this.firstOfMonth.format(p);for(this.monthName=t.format(f);n<a;)i[v[n]]={date:""},n++;var o=!0,s=!1,r=undefined;try{for(var l,u=(0,d["default"])({from:1,to:this.lastOfMonth.date(),inclusive:!0})[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var h=l.value,c=this.firstOfMonth.clone().add(h-1,"days");i[v[n]]=this._dateWithMetadata(c),n++,7===n&&(n=0,e.push(i),i=h===this.lastOfMonth.date()?null:{})}}catch(t){s=!0,r=t}finally{try{!o&&u["return"]&&u["return"]()}finally{if(s)throw r}}if(i){for(;n<7;)i[v[n]]={date:""},n++;e.push(i)}return this._render(e)}},{key:"_dateWithMetadata",value:function(t){return{date:t.date(),isStart:t.isSame(this.fromMoment),isEnd:t.isSame(this.toMoment),isSelected:t.isAfter(this.fromMoment)&&t.isBefore(this.toMoment)}}}]),t}();a["default"]=y,Shopify.HomeSidebarCalendar=null!=a["default"]?a["default"]:a}),t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=n(H),u=s(S),h=function(t){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),e(n,[{key:"queries",value:function(){return{
totalSessions:"SHOW total_sessions\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,topCountries:"SHOW total_sessions\n         BY location_country\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_sessions DESC\n         LIMIT 5"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data")}},{key:"renderResult",value:function(t){var e=t[0].result.data[0][0],i=t[1].result.data;if(!i.length)return void this.append(this.noDataTemplate,{widgetErrorMessage:this.widgetErrorMessage});var n=i.map(function(t){return{referrerName:t[0]||"Unknown",referrerCount:u.formatNumberCondensed(t[1]),percentage:u.formatPercentage(t[1]/e)}}),a=n.filter(function(t){return"0%"!==t.percentage});this.append(this.resultTemplate,{referrers:a})}}]),n}(l["default"]);r["default"]=h,Shopify.HomeTopCountriesReport=null!=r["default"]?r["default"]:r}),t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=n(H),u=s(S),h=function(t){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),e(n,[{key:"queries",value:function(){return{totalSessions:"SHOW total_sessions\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,landingPages:"SHOW total_sessions\n         BY page_path, host(page_url)\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_sessions DESC\n         LIMIT 5"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data")}},{key:"renderResult",value:function(t){var e=t[0].result.data[0][0],i=t[1].result.data;if(!i.length)return void this.append(this.noDataTemplate,{widgetErrorMessage:this.widgetErrorMessage});var n=i.map(function(t){return{referrerURL:"http://"+t[1]+t[0],referrerName:u.formatLink(t[0])||"Frontpage ("+u.formatLink(t[1])+")",referrerCount:u.formatNumberCondensed(t[2]),percentage:u.formatPercentage(t[2]/e)}}),a=n.filter(function(t){return"0%"!==t.percentage});this.append(this.resultTemplate,{referrers:a})}}]),n}(l["default"]);r["default"]=h,Shopify.HomeTopLandingPagesReport=null!=r["default"]?r["default"]:r}),t(function(t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=n(L),l=function(t){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),e(n,[{key:"queries",value:function(){return{totalSessions:"SHOW total_sessions\n         FROM visits\n         WHERE referrer_source == 'Social'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,topReferrers:"SHOW total_sessions\n         BY referrer_name\n         FROM visits\n         WHERE referrer_source == 'Social'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_sessions DESC\n         LIMIT 5"}}}]),n}(r["default"]);s["default"]=l,Shopify.HomeTopSocialReferrersReport=null!=s["default"]?s["default"]:s}),t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=n(H),u=s(S),h="Point of Sale",d=function(t){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),e(n,[{key:"queries",value:function(){var t=this.channelId.split("-")[1];return{topStaff:"SHOW total_orders, total_sales\n         BY employee_id, employee_name\n         FROM sales\n         WHERE api_client_title == '"+h+"'\n         AND location_id == "+t+"\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_orders DESC\n         LIMIT 3"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(t){var e=t[0].result.data;if(!e.length)return void this.append(this.noDataTemplate);var i=e.map(function(t,i){return{id:t[0],name:t[1],orderCount:u.formatNumberCondensed(t[2]),totalSales:u.formatMoney(t[3]),average:t[2]?u.formatMoney(t[3]/t[2]):"$0.00",isLastEntry:i===e.length-1}});this.append(this.resultTemplate,{staffMembers:i})}}]),n}(l["default"]);r["default"]=d,Shopify.HomeTopStaffReport=null!=r["default"]?r["default"]:r}),t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=n(B),u=n(x),h=s(S),d=s(g),c=function(t){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),e(n,[{key:"queries",value:function(){return{views:"SHOW total_views\n         OVER day(occurred_on)\n         AS day\n         FROM daily_channel_product_listing_engagements\n         WHERE api_client_title == '"+this.queryProps.channelName+"'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY day ASC",totalViews:"SHOW total_views\n         FROM daily_channel_product_listing_engagements\n         WHERE api_client_title == '"+this.queryProps.channelName+"'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate}}},{key:"initializeView",value:function(){var t={formatPrimaryValue:function(t){return h.formatNumber(t)+" "+d.pluralize(t,"view")},formatYAxisValue:function(t){return h.formatNumberCondensed(t)}};this.transformGraphData=(0,u["default"])({type:"visits",dataFormatters:t}),this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(t){var e=t[0].result;if(!e.data.length)return void this.append(this.noDataTemplate);var i=h.formatNumber(t[1].result.data[0][0]),n=d.pluralize(i,"view");this.append(this.resultTemplate,{views:i+" "+n,graph:this.transformGraphData(e)})}}]),n}(l["default"]);r["default"]=c,Shopify.HomeViewsReport=null!=r["default"]?r["default"]:r}));t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=n(U),u=n(x),h=s(S),d=function(t){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),e(n,[{key:"queries",value:function(){var t=this.queryProps.startDate===this.queryProps.endDate,e=t?"hour":"day";return{totalSessions:"SHOW total_sessions\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,totalVisitors:"SHOW total_visitors\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,visits:"SHOW total_sessions, total_visitors\n         OVER "+e+"(timestamp)\n         AS "+e+"\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY "+e+" ASC"}}},{key:"initializeView",value:function(){var t={formatPrimaryValue:function(t){return h.formatNumber(t)+" visits"},formatSecondaryValue:function(t){return h.formatNumber(t)+" visitors"},formatYAxisValue:function(t){return h.formatNumberCondensed(t)}};this.transformGraphData=(0,u["default"])({type:"visits",dataFormatters:t}),this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(t){var e=t[0].result.data,i=t[1].result.data;if(!i)return void this.append(this.noDataTemplate);this.append(this.resultTemplate,{visits:h.formatNumber(e),visitors:h.formatNumber(i),graph:this.transformGraphData(t[2].result)})}}]),n}(l["default"]);r["default"]=d,Shopify.HomeOnlineStoreVisitorsReport=null!=r["default"]?r["default"]:r}),t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=n(H),u=s(g),h=s(S),d=n(x),c=function(t){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),e(n,[{key:"queries",value:function(){var t=this.queryProps.startDate===this.queryProps.endDate,e=t?"hour":"day";return{sales:"SHOW total_sales\n         OVER "+e+"(processed_at)\n         AS "+e+"\n         FROM sales\n         "+this.queryProps.channelFilter+"\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY "+e+" ASC",totalSalesAndOrders:"SHOW total_sales, total_orders\n         FROM sales\n         "+this.queryProps.channelFilter+"\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate}}},{key:"initializeView",value:function(){var t={formatPrimaryValue:function(t){return h.formatMoney(t)},formatYAxisValue:function(t){return h.formatMoneyCondensed(t)}};this.transformGraphData=new d["default"]({dataFormatters:t}),this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(t){var e=t[0].result;if(!e.data.length)return void this.append(this.noDataTemplate);var i=t[1].result,n=h.formatNumber(i.data[0][1]),a=u.pluralize(i.data[0][1],"order");this.append(this.resultTemplate,{total:h.formatMoney(i.data[0][0]),orders:n+" "+a,graph:this.transformGraphData(e)})}}]),n}(l["default"]);r["default"]=c,Shopify.HomeSalesReport=null!=r["default"]?r["default"]:r}),t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var u=n(H),h=s(S),d=function(t){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),e(n,[{key:"queries",value:function(){return{totalSalesBreakdown:'SHOW\n           total_sales,\n           sum((IF (sale_line_type IN ("product", "shipping", "unknown") AND sale_kind == "order") THEN amount_after_discounts_after_tax)) AS order_sales,\n           sum((IF (sale_line_type IN ("product", "shipping", "unknown") AND sale_kind == "return") THEN amount_after_discounts_after_tax)) AS returns_amount,\n           count(DISTINCT (IF (sale_kind == "return") THEN order_id)) AS returns_count\n         FROM sales\n         '+this.queryProps.channelFilter+"\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success")}},{key:"renderResult",value:function(t){var e=t[0].result.data;if(!e.length)return void this.$node.hide();var i=l(e[0],4),n=i[0],a=i[1],o=i[2];i[3]>0?(this.append(this.resultTemplate,{formattedDate:this.homeSidebar.formattedDate,totalSales:h.formatMoney(n),sales:h.formatMoney(a),returnsAmount:h.formatMoney(o)}),this.$node.show()):this.$node.hide()}}]),n}(u["default"]);r["default"]=d,Shopify.HomeTotalSalesBreakdown=null!=r["default"]?r["default"]:r});(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Shopify.SocialMarketingFrame=function(){function e(e,i){this.node=e,this.url=i,this.receive=t(this.receive,this),this.show=t(this.show,this),this.onLoad=t(this.onLoad,this),this.context=Twine.context(document.body),Shopify.rootDispatcher.register("SocialMarketingFrameOpen",this.show).bindToNode(this.node),window.addEventListener("message",this.receive)}return e.prototype.loaded=!1,e.prototype.onLoad=function(t){return""!==t.target.src&&(this.loaded=!0),Twine.refresh()},e.prototype.show=function(t){return null==t&&(t={}),null!=t.url?this.src=t.url:this.src=this.url,t.funnel&&(this.src=Shopify.UrlMangler.addQuery(Shopify.UrlMangler.getURL(this.src),{funnel:t.funnel})),Twine.refresh(),this.context.SocialMarketingModal.show()},e.prototype.receive=function(t){var e,i;try{e=JSON.parse(t.data)}catch(t){return}return e.closeMarketingModal&&(this.context.SocialMarketingModal.hide(),this.src="",this.loaded=!1),e.marketingFrameHeight&&(i=window.innerHeight-40,this.height=e.marketingFrameHeight<i?e.marketingFrameHeight:i),Twine.refresh()},e}()}).call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t="a, a *, input, button, [data-bind-event-click], [aria-haspopup], td.select, .ui-popover *",Shopify.NestedLinkContainer=function(){function i(t){var i;if(this.node=t,this.linkTo=e(this.linkTo,this),i=$(this.node),this.linkNode=i.find("a[data-nested-link-target]"),!this.linkNode.is("a"))throw new Error("NestedLinkContainer must be constructed with a node that is an <a> tag");i.on("click",this.linkTo)}return i.BLACK_LIST=t,i.prototype.linkTo=function(e){if(!($(e.target).filter(t).length>0||this._hasSelection()))return this.navigateTo()},i.prototype.navigateTo=function(){return this.linkNode[0].click()},i.prototype._hasSelection=function(){return window.getSelection().toString().length>0},i}()}.call(this);(function(){var t,e,i,n,a,o,s,r,l,u,h=function(t,e){return function(){return t.apply(e,arguments)}};t={TYPE:"data-collapsible",STATE:"data-collapsible-state",MAX_WIDTH:"data-collapsible-maxwidth",HIDDEN:"aria-hidden",BTN:{TARGET:"data-collapsible-target",EXPANDED:"aria-expanded",TEXT:{EXPANDED:"data-collapsible-text--expanded",COLLAPSED:"data-collapsible-text--collapsed"},ICON:{EXPANDED:"data-collapsible-icon--expanded",COLLAPSED:"data-collapsible-icon--collapsed"}}},e={BTN:{TEXT:"btn__text",ICON:"icon"}},n="collapsible:collapsed",a="collapsible:expanded",s={},l=function(t){return s[t.id]},o={},r=function(e){return o[e.getAttribute(t.BTN.TARGET)]},Shopify.Collapsible=function(){function e(e){var i;this.node=e,this._finishTransition=h(this._finishTransition,this),this._getHeight=h(this._getHeight,this),this.node,this.id=this.node.id,this.id&&(this.collapsed="collapsed"===this.node.getAttribute(t.STATE),this.dismissible="dismissible"===this.node.getAttribute(t.TYPE),i=this.node.getAttribute(t.MAX_WIDTH),this.maxwidth=i?parseInt(i,10):void 0,this.activator=null,this._pairActivator(),this._toggleAtWidth(),this._trackWidthResize())}return e.DISPATCHER_COLLAPSED_ACTION=n,e.DISPATCHER_EXPANDED_ACTION=a,e._collapsibleRefs=s,e.getCollapsibleRefForNode=l,e._activatorRefs=o,e.getActivatorForNode=r,e.prototype.toggle=function(t){return null==t&&(t=!0),this.collapsed?this.expand(t):this.collapse(t)},e.prototype.expand=function(e){return null==e&&(e=!0),this.collapsed?(this.activator&&this.activator.expand(),e?(this.node.addEventListener("transitionend",this._finishTransition),this.node.classList.add("collapsible--has-transition"),this.node.style.height=this._getHeight(),this.node.offsetHeight,requestAnimationFrame(function(e){return function(){return e.collapsed=!1,e.node.setAttribute(t.STATE,"expanded"),e.node.setAttribute(t.HIDDEN,"false"),Shopify.rootDispatcher.dispatch(e._generateTransitionEvent())}}(this))):(this.collapsed=!1,this.node.setAttribute(t.STATE,"expanded"),this.node.setAttribute(t.HIDDEN,"false"),this.activator.ready=!0,Shopify.rootDispatcher.dispatch(this._generateTransitionEvent()))):this},e.prototype.collapse=function(e){return null==e&&(e=!0),this.collapsed?this:(this.activator&&this.activator.collapse(),e?(this.node.addEventListener("transitionend",this._finishTransition),this.node.classList.add("collapsible--has-transition"),this.node.style.height=this._getHeight(),this.node.offsetHeight,requestAnimationFrame(function(e){return function(){return e.collapsed=!0,e.node.setAttribute(t.STATE,"collapsed"),e.node.setAttribute(t.HIDDEN,"true"),Shopify.rootDispatcher.dispatch(e._generateTransitionEvent())}}(this))):(this.collapsed=!0,this.node.setAttribute(t.STATE,"collapsed"),this.node.setAttribute(t.HIDDEN,"true"),this.activator.ready=!0,Shopify.rootDispatcher.dispatch(this._generateTransitionEvent()),this.dismissible&&this.collapsed?this.remove():void 0))},e.prototype.remove=function(){this.activator&&this.activator.remove(),s[this.id]=null,this.node.parentNode.removeChild(this.node)},e.prototype._getHeight=function(){var t;return t=this.node.scrollHeight,t+=parseInt(window.getComputedStyle(this.node).getPropertyValue("margin-bottom"),10),(t+=parseInt(window.getComputedStyle(this.node).getPropertyValue("margin-top"),10))+"px"},e.prototype._finishTransition=function(t){if(t.target===this.node&&"height"===t.propertyName&&(this.node.removeEventListener("transitionend",this._finishTransition),this.node.classList.remove("collapsible--has-transition"),this.node.style.height=null,this.node.offsetHeight,this.activator.ready=!0,this.dismissible&&this.collapsed))return this.remove()},e.prototype._generateTransitionEvent=function(){return{type:this.collapsed?n:a,data:{collapsibleInstance:this}}},e.prototype._pairActivator=function(){var e;if(e=document.querySelector("["+t.BTN.TARGET+"='"+this.id+"']"))return o[this.id]=new i(e,this),this.activator=o[this.id]},e.prototype._toggleAtWidth=function(t){return null==t&&(t=!1),this.maxwidth&&(this.node.offsetWidth>=this.maxwidth?(this.collapsed&&this.expand(t),this.activator&&this.activator.hide()):this.activator&&this.activator.show()),this},e.prototype._trackWidthResize=function(){if(this.maxwidth)return window.addEventListener("resize",_.debounce(function(t){return function(){return requestAnimationFrame(function(){return t._toggleAtWidth()})}}(this),50))},e}(),i=function(){function i(i,n){var a,o;this.node=i,this.collapsible=n,this._clickToToggle=h(this._clickToToggle,this),this.node,this.collapsible,this.target=this.collapsible.node,this.collapsed="false"===this.node.getAttribute(t.BTN.EXPANDED),this.ready=!0,o=this.node.getElementsByClassName(e.BTN.TEXT)[0],this.text={node:o,expanded:o?o.getAttribute(t.BTN.TEXT.EXPANDED):void 0,collapsed:o?o.getAttribute(t.BTN.TEXT.COLLAPSED):void 0},a=this.node.getElementsByClassName(e.BTN.ICON)[0],this.icon={node:a,symbol:a?a.getElementsByTagName("use")[0]:void 0,expanded:a?a.getAttribute(t.BTN.ICON.EXPANDED):void 0,collapsed:a?a.getAttribute(t.BTN.ICON.COLLAPSED):void 0},this.node.addEventListener("click",this._clickToToggle)}return i._collapsibleRefs=s,i.getCollapsibleRefForNode=l,i._activatorRefs=o,i.getActivatorForNode=r,i.prototype.toggle=function(){return this.collapsed?this.expand():this.collapse()},i.prototype.expand=function(){return this.collapsed?(this.ready=!1,this.collapsed=!1,this.node.setAttribute(t.BTN.EXPANDED,"true"),this._toggleText(),this._toggleIcon(),this):this},i.prototype.collapse=function(){return this.collapsed?this:(this.ready=!1,this.collapsed=!0,this.node.setAttribute(t.BTN.EXPANDED,"false"),this._toggleText(),this._toggleIcon(),this)},i.prototype.remove=function(){this.node.removeEventListener("click",this._clickToToggle),o[this.node.getAttribute(t.BTN.TARGET)]=null,this.node.parentNode.removeChild(this.node)},i.prototype.hide=function(){this.node.classList.add("hide")},i.prototype.show=function(){this.node.classList.remove("hide")},i.prototype._toggleText=function(){return this.text.expanded&&this.text.collapsed&&(this.text.node.innerHTML=this.collapsed?this.text.collapsed:this.text.expanded),this},i.prototype._toggleIcon=function(){return this.icon.expanded&&this.icon.collapsed&&(this.collapsed?this.icon.symbol.setAttribute("xlink:href","#"+this.icon.collapsed):this.icon.symbol.setAttribute("xlink:href","#"+this.icon.expanded)),this},i.prototype._clickToToggle=function(t){if(this.ready)return t.preventDefault(),document.body.contains(this.target)?this.collapsible.toggle():void 0},i}(),u=function(){var e,i,n,a,o,r;for(o=document.querySelectorAll("["+t.TYPE+"]"),r=[],n=0,a=o.length;n<a;n++)e=o[n],i=e.id,i?r.push(s[i]=new Shopify.Collapsible(e)):r.push(console.log("This collapsible has been rejected because of missing ID!"));return r},$(document).on("ready page:load",u)}).call(this);t(function(){"use strict";window.Bugsnag&&(window.Bugsnag.metaData.bundles["shopify-home"]=!0)})}("undefined"!=typeof global?global:"undefined"!=typeof window&&window);